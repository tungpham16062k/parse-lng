"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(self["webpackChunk_N_E"] = self["webpackChunk_N_E"] || []).push([["node_modules_vanilla-picker_dist_vanilla-picker_mjs"],{

/***/ "./node_modules/vanilla-picker/dist/vanilla-picker.mjs":
/*!*************************************************************!*\
  !*** ./node_modules/vanilla-picker/dist/vanilla-picker.mjs ***!
  \*************************************************************/
/***/ (function(__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": function() { return /* binding */ Picker; }\n/* harmony export */ });\n/*!\n * vanilla-picker v2.12.3\n * https://vanilla-picker.js.org\n *\n * Copyright 2017-2024 Andreas Borgen (https://github.com/Sphinxxxx), Adam Brooks (https://github.com/dissimulate)\n * Released under the ISC license.\n */\nvar classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\nvar slicedToArray = function () {\n  function sliceIterator(arr, i) {\n    var _arr = [];\n    var _n = true;\n    var _d = false;\n    var _e = undefined;\n\n    try {\n      for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n        _arr.push(_s.value);\n\n        if (i && _arr.length === i) break;\n      }\n    } catch (err) {\n      _d = true;\n      _e = err;\n    } finally {\n      try {\n        if (!_n && _i[\"return\"]) _i[\"return\"]();\n      } finally {\n        if (_d) throw _e;\n      }\n    }\n\n    return _arr;\n  }\n\n  return function (arr, i) {\n    if (Array.isArray(arr)) {\n      return arr;\n    } else if (Symbol.iterator in Object(arr)) {\n      return sliceIterator(arr, i);\n    } else {\n      throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n    }\n  };\n}();\n\nString.prototype.startsWith = String.prototype.startsWith || function (needle) {\n    return this.indexOf(needle) === 0;\n};\nString.prototype.padStart = String.prototype.padStart || function (len, pad) {\n    var str = this;while (str.length < len) {\n        str = pad + str;\n    }return str;\n};\n\nvar colorNames = { cb: '0f8ff', tqw: 'aebd7', q: '-ffff', qmrn: '7fffd4', zr: '0ffff', bg: '5f5dc', bsq: 'e4c4', bck: '---', nch: 'ebcd', b: '--ff', bvt: '8a2be2', brwn: 'a52a2a', brw: 'deb887', ctb: '5f9ea0', hrt: '7fff-', chcT: 'd2691e', cr: '7f50', rnw: '6495ed', crns: '8dc', crms: 'dc143c', cn: '-ffff', Db: '--8b', Dcn: '-8b8b', Dgnr: 'b8860b', Dgr: 'a9a9a9', Dgrn: '-64-', Dkhk: 'bdb76b', Dmgn: '8b-8b', Dvgr: '556b2f', Drng: '8c-', Drch: '9932cc', Dr: '8b--', Dsmn: 'e9967a', Dsgr: '8fbc8f', DsTb: '483d8b', DsTg: '2f4f4f', Dtrq: '-ced1', Dvt: '94-d3', ppnk: '1493', pskb: '-bfff', mgr: '696969', grb: '1e90ff', rbrc: 'b22222', rwht: 'af0', stg: '228b22', chs: '-ff', gnsb: 'dcdcdc', st: '8f8ff', g: 'd7-', gnr: 'daa520', gr: '808080', grn: '-8-0', grnw: 'adff2f', hnw: '0fff0', htpn: '69b4', nnr: 'cd5c5c', ng: '4b-82', vr: '0', khk: '0e68c', vnr: 'e6e6fa', nrb: '0f5', wngr: '7cfc-', mnch: 'acd', Lb: 'add8e6', Lcr: '08080', Lcn: 'e0ffff', Lgnr: 'afad2', Lgr: 'd3d3d3', Lgrn: '90ee90', Lpnk: 'b6c1', Lsmn: 'a07a', Lsgr: '20b2aa', Lskb: '87cefa', LsTg: '778899', Lstb: 'b0c4de', Lw: 'e0', m: '-ff-', mgrn: '32cd32', nn: 'af0e6', mgnt: '-ff', mrn: '8--0', mqm: '66cdaa', mmb: '--cd', mmrc: 'ba55d3', mmpr: '9370db', msg: '3cb371', mmsT: '7b68ee', '': '-fa9a', mtr: '48d1cc', mmvt: 'c71585', mnLb: '191970', ntc: '5fffa', mstr: 'e4e1', mccs: 'e4b5', vjw: 'dead', nv: '--80', c: 'df5e6', v: '808-0', vrb: '6b8e23', rng: 'a5-', rngr: '45-', rch: 'da70d6', pgnr: 'eee8aa', pgrn: '98fb98', ptrq: 'afeeee', pvtr: 'db7093', ppwh: 'efd5', pchp: 'dab9', pr: 'cd853f', pnk: 'c0cb', pm: 'dda0dd', pwrb: 'b0e0e6', prp: '8-080', cc: '663399', r: '--', sbr: 'bc8f8f', rb: '4169e1', sbrw: '8b4513', smn: 'a8072', nbr: '4a460', sgrn: '2e8b57', ssh: '5ee', snn: 'a0522d', svr: 'c0c0c0', skb: '87ceeb', sTb: '6a5acd', sTgr: '708090', snw: 'afa', n: '-ff7f', stb: '4682b4', tn: 'd2b48c', t: '-8080', thst: 'd8bfd8', tmT: '6347', trqs: '40e0d0', vt: 'ee82ee', whT: '5deb3', wht: '', hts: '5f5f5', w: '-', wgrn: '9acd32' };\n\nfunction printNum(num) {\n    var decs = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;\n\n    var str = decs > 0 ? num.toFixed(decs).replace(/0+$/, '').replace(/\\.$/, '') : num.toString();\n    return str || '0';\n}\n\nvar Color = function () {\n    function Color(r, g, b, a) {\n        classCallCheck(this, Color);\n\n\n        var that = this;\n        function parseString(input) {\n\n            if (input.startsWith('hsl')) {\n                var _input$match$map = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map2 = slicedToArray(_input$match$map, 4),\n                    h = _input$match$map2[0],\n                    s = _input$match$map2[1],\n                    l = _input$match$map2[2],\n                    _a = _input$match$map2[3];\n\n                if (_a === undefined) {\n                    _a = 1;\n                }\n\n                h /= 360;\n                s /= 100;\n                l /= 100;\n                that.hsla = [h, s, l, _a];\n            } else if (input.startsWith('rgb')) {\n                var _input$match$map3 = input.match(/([\\-\\d\\.e]+)/g).map(Number),\n                    _input$match$map4 = slicedToArray(_input$match$map3, 4),\n                    _r = _input$match$map4[0],\n                    _g = _input$match$map4[1],\n                    _b = _input$match$map4[2],\n                    _a2 = _input$match$map4[3];\n\n                if (_a2 === undefined) {\n                    _a2 = 1;\n                }\n\n                that.rgba = [_r, _g, _b, _a2];\n            } else {\n                if (input.startsWith('#')) {\n                    that.rgba = Color.hexToRgb(input);\n                } else {\n                    that.rgba = Color.nameToRgb(input) || Color.hexToRgb(input);\n                }\n            }\n        }\n\n        if (r === undefined) ; else if (Array.isArray(r)) {\n            this.rgba = r;\n        } else if (b === undefined) {\n            var color = r && '' + r;\n            if (color) {\n                parseString(color.toLowerCase());\n            }\n        } else {\n            this.rgba = [r, g, b, a === undefined ? 1 : a];\n        }\n    }\n\n    createClass(Color, [{\n        key: 'printRGB',\n        value: function printRGB(alpha) {\n            var rgb = alpha ? this.rgba : this.rgba.slice(0, 3),\n                vals = rgb.map(function (x, i) {\n                return printNum(x, i === 3 ? 3 : 0);\n            });\n\n            return alpha ? 'rgba(' + vals + ')' : 'rgb(' + vals + ')';\n        }\n    }, {\n        key: 'printHSL',\n        value: function printHSL(alpha) {\n            var mults = [360, 100, 100, 1],\n                suff = ['', '%', '%', ''];\n\n            var hsl = alpha ? this.hsla : this.hsla.slice(0, 3),\n                vals = hsl.map(function (x, i) {\n                return printNum(x * mults[i], i === 3 ? 3 : 1) + suff[i];\n            });\n\n            return alpha ? 'hsla(' + vals + ')' : 'hsl(' + vals + ')';\n        }\n    }, {\n        key: 'printHex',\n        value: function printHex(alpha) {\n            var hex = this.hex;\n            return alpha ? hex : hex.substring(0, 7);\n        }\n    }, {\n        key: 'rgba',\n        get: function get() {\n            if (this._rgba) {\n                return this._rgba;\n            }\n            if (!this._hsla) {\n                throw new Error('No color is set');\n            }\n\n            return this._rgba = Color.hslToRgb(this._hsla);\n        },\n        set: function set(rgb) {\n            if (rgb.length === 3) {\n                rgb[3] = 1;\n            }\n\n            this._rgba = rgb;\n            this._hsla = null;\n        }\n    }, {\n        key: 'rgbString',\n        get: function get() {\n            return this.printRGB();\n        }\n    }, {\n        key: 'rgbaString',\n        get: function get() {\n            return this.printRGB(true);\n        }\n    }, {\n        key: 'hsla',\n        get: function get() {\n            if (this._hsla) {\n                return this._hsla;\n            }\n            if (!this._rgba) {\n                throw new Error('No color is set');\n            }\n\n            return this._hsla = Color.rgbToHsl(this._rgba);\n        },\n        set: function set(hsl) {\n            if (hsl.length === 3) {\n                hsl[3] = 1;\n            }\n\n            this._hsla = hsl;\n            this._rgba = null;\n        }\n    }, {\n        key: 'hslString',\n        get: function get() {\n            return this.printHSL();\n        }\n    }, {\n        key: 'hslaString',\n        get: function get() {\n            return this.printHSL(true);\n        }\n    }, {\n        key: 'hex',\n        get: function get() {\n            var rgb = this.rgba,\n                hex = rgb.map(function (x, i) {\n                return i < 3 ? x.toString(16) : Math.round(x * 255).toString(16);\n            });\n\n            return '#' + hex.map(function (x) {\n                return x.padStart(2, '0');\n            }).join('');\n        },\n        set: function set(hex) {\n            this.rgba = Color.hexToRgb(hex);\n        }\n    }], [{\n        key: 'hexToRgb',\n        value: function hexToRgb(input) {\n\n            var hex = (input.startsWith('#') ? input.slice(1) : input).replace(/^(\\w{3})$/, '$1F').replace(/^(\\w)(\\w)(\\w)(\\w)$/, '$1$1$2$2$3$3$4$4').replace(/^(\\w{6})$/, '$1FF');\n\n            if (!hex.match(/^([0-9a-fA-F]{8})$/)) {\n                throw new Error('Unknown hex color; ' + input);\n            }\n\n            var rgba = hex.match(/^(\\w\\w)(\\w\\w)(\\w\\w)(\\w\\w)$/).slice(1).map(function (x) {\n                return parseInt(x, 16);\n            });\n\n            rgba[3] = rgba[3] / 255;\n            return rgba;\n        }\n    }, {\n        key: 'nameToRgb',\n        value: function nameToRgb(input) {\n\n            var hash = input.toLowerCase().replace('at', 'T').replace(/[aeiouyldf]/g, '').replace('ght', 'L').replace('rk', 'D').slice(-5, 4),\n                hex = colorNames[hash];\n            return hex === undefined ? hex : Color.hexToRgb(hex.replace(/\\-/g, '00').padStart(6, 'f'));\n        }\n    }, {\n        key: 'rgbToHsl',\n        value: function rgbToHsl(_ref) {\n            var _ref2 = slicedToArray(_ref, 4),\n                r = _ref2[0],\n                g = _ref2[1],\n                b = _ref2[2],\n                a = _ref2[3];\n\n            r /= 255;\n            g /= 255;\n            b /= 255;\n\n            var max = Math.max(r, g, b),\n                min = Math.min(r, g, b);\n            var h = void 0,\n                s = void 0,\n                l = (max + min) / 2;\n\n            if (max === min) {\n                h = s = 0;\n            } else {\n                var d = max - min;\n                s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n                switch (max) {\n                    case r:\n                        h = (g - b) / d + (g < b ? 6 : 0);break;\n                    case g:\n                        h = (b - r) / d + 2;break;\n                    case b:\n                        h = (r - g) / d + 4;break;\n                }\n\n                h /= 6;\n            }\n\n            return [h, s, l, a];\n        }\n    }, {\n        key: 'hslToRgb',\n        value: function hslToRgb(_ref3) {\n            var _ref4 = slicedToArray(_ref3, 4),\n                h = _ref4[0],\n                s = _ref4[1],\n                l = _ref4[2],\n                a = _ref4[3];\n\n            var r = void 0,\n                g = void 0,\n                b = void 0;\n\n            if (s === 0) {\n                r = g = b = l;\n            } else {\n                var hue2rgb = function hue2rgb(p, q, t) {\n                    if (t < 0) t += 1;\n                    if (t > 1) t -= 1;\n                    if (t < 1 / 6) return p + (q - p) * 6 * t;\n                    if (t < 1 / 2) return q;\n                    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n                    return p;\n                };\n\n                var q = l < 0.5 ? l * (1 + s) : l + s - l * s,\n                    p = 2 * l - q;\n\n                r = hue2rgb(p, q, h + 1 / 3);\n                g = hue2rgb(p, q, h);\n                b = hue2rgb(p, q, h - 1 / 3);\n            }\n\n            var rgba = [r * 255, g * 255, b * 255].map(Math.round);\n            rgba[3] = a;\n\n            return rgba;\n        }\n    }]);\n    return Color;\n}();\n\nvar EventBucket = function () {\n    function EventBucket() {\n        classCallCheck(this, EventBucket);\n\n        this._events = [];\n    }\n\n    createClass(EventBucket, [{\n        key: 'add',\n        value: function add(target, type, handler) {\n            target.addEventListener(type, handler, false);\n            this._events.push({\n                target: target,\n                type: type,\n                handler: handler\n            });\n        }\n    }, {\n        key: 'remove',\n        value: function remove(target, type, handler) {\n            this._events = this._events.filter(function (e) {\n                var isMatch = true;\n                if (target && target !== e.target) {\n                    isMatch = false;\n                }\n                if (type && type !== e.type) {\n                    isMatch = false;\n                }\n                if (handler && handler !== e.handler) {\n                    isMatch = false;\n                }\n\n                if (isMatch) {\n                    EventBucket._doRemove(e.target, e.type, e.handler);\n                }\n                return !isMatch;\n            });\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.forEach(function (e) {\n                return EventBucket._doRemove(e.target, e.type, e.handler);\n            });\n            this._events = [];\n        }\n    }], [{\n        key: '_doRemove',\n        value: function _doRemove(target, type, handler) {\n            target.removeEventListener(type, handler, false);\n        }\n    }]);\n    return EventBucket;\n}();\n\nfunction parseHTML(htmlString) {\n\n    var div = document.createElement('div');\n    div.innerHTML = htmlString;\n    return div.firstElementChild;\n}\n\nfunction dragTrack(eventBucket, area, callback) {\n    var dragging = false;\n\n    function clamp(val, min, max) {\n        return Math.max(min, Math.min(val, max));\n    }\n\n    function onMove(e, info, starting) {\n        if (starting) {\n            dragging = true;\n        }\n        if (!dragging) {\n            return;\n        }\n\n        e.preventDefault();\n\n        var bounds = area.getBoundingClientRect(),\n            w = bounds.width,\n            h = bounds.height,\n            x = info.clientX,\n            y = info.clientY;\n\n        var relX = clamp(x - bounds.left, 0, w),\n            relY = clamp(y - bounds.top, 0, h);\n\n        callback(relX / w, relY / h);\n    }\n\n    function onMouse(e, starting) {\n        var button = e.buttons === undefined ? e.which : e.buttons;\n        if (button === 1) {\n            onMove(e, e, starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    function onTouch(e, starting) {\n        if (e.touches.length === 1) {\n            onMove(e, e.touches[0], starting);\n        } else {\n            dragging = false;\n        }\n    }\n\n    eventBucket.add(area, 'mousedown', function (e) {\n        onMouse(e, true);\n    });\n    eventBucket.add(area, 'touchstart', function (e) {\n        onTouch(e, true);\n    });\n    eventBucket.add(window, 'mousemove', onMouse);\n    eventBucket.add(area, 'touchmove', onTouch);\n    eventBucket.add(window, 'mouseup', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchend', function (e) {\n        dragging = false;\n    });\n    eventBucket.add(area, 'touchcancel', function (e) {\n        dragging = false;\n    });\n}\n\nvar BG_TRANSP = 'linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0 / 2em 2em,\\n                   linear-gradient(45deg, lightgrey 25%,       white 25%,       white 75%, lightgrey 75%) 1em 1em / 2em 2em';\nvar HUES = 360;\n\nvar EVENT_KEY = 'keydown',\n    EVENT_CLICK_OUTSIDE = 'mousedown',\n    EVENT_TAB_MOVE = 'focusin';\n\nfunction $(selector, context) {\n    return (context || document).querySelector(selector);\n}\n\nfunction stopEvent(e) {\n\n    e.preventDefault();\n    e.stopPropagation();\n}\nfunction onKey(bucket, target, keys, handler, stop) {\n    bucket.add(target, EVENT_KEY, function (e) {\n        if (keys.indexOf(e.key) >= 0) {\n            if (stop) {\n                stopEvent(e);\n            }\n            handler(e);\n        }\n    });\n}\n\nvar Picker = function () {\n    function Picker(options) {\n        classCallCheck(this, Picker);\n\n\n        this.settings = {\n\n            popup: 'right',\n            layout: 'default',\n            alpha: true,\n            editor: true,\n            editorFormat: 'hex',\n            cancelButton: false,\n            defaultColor: '#0cf'\n        };\n\n        this._events = new EventBucket();\n\n        this.onChange = null;\n\n        this.onDone = null;\n\n        this.onOpen = null;\n\n        this.onClose = null;\n\n        this.setOptions(options);\n    }\n\n    createClass(Picker, [{\n        key: 'setOptions',\n        value: function setOptions(options) {\n            var _this = this;\n\n            if (!options) {\n                return;\n            }\n            var settings = this.settings;\n\n            function transfer(source, target, skipKeys) {\n                for (var key in source) {\n                    if (skipKeys && skipKeys.indexOf(key) >= 0) {\n                        continue;\n                    }\n\n                    target[key] = source[key];\n                }\n            }\n\n            if (options instanceof HTMLElement) {\n                settings.parent = options;\n            } else {\n\n                if (settings.parent && options.parent && settings.parent !== options.parent) {\n                    this._events.remove(settings.parent);\n                    this._popupInited = false;\n                }\n\n                transfer(options, settings);\n\n                if (options.onChange) {\n                    this.onChange = options.onChange;\n                }\n                if (options.onDone) {\n                    this.onDone = options.onDone;\n                }\n                if (options.onOpen) {\n                    this.onOpen = options.onOpen;\n                }\n                if (options.onClose) {\n                    this.onClose = options.onClose;\n                }\n\n                var col = options.color || options.colour;\n                if (col) {\n                    this._setColor(col);\n                }\n            }\n\n            var parent = settings.parent;\n            if (parent && settings.popup && !this._popupInited) {\n\n                var openProxy = function openProxy(e) {\n                    return _this.openHandler(e);\n                };\n\n                this._events.add(parent, 'click', openProxy);\n\n                onKey(this._events, parent, [' ', 'Spacebar', 'Enter'], openProxy);\n\n                this._popupInited = true;\n            } else if (options.parent && !settings.popup) {\n                this.show();\n            }\n        }\n    }, {\n        key: 'openHandler',\n        value: function openHandler(e) {\n            if (this.show()) {\n\n                e && e.preventDefault();\n\n                this.settings.parent.style.pointerEvents = 'none';\n\n                var toFocus = e && e.type === EVENT_KEY ? this._domEdit : this.domElement;\n                setTimeout(function () {\n                    return toFocus.focus();\n                }, 100);\n\n                if (this.onOpen) {\n                    this.onOpen(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'closeHandler',\n        value: function closeHandler(e) {\n            var event = e && e.type;\n            var doHide = false;\n\n            if (!e) {\n                doHide = true;\n            } else if (event === EVENT_CLICK_OUTSIDE || event === EVENT_TAB_MOVE) {\n\n                var knownTime = (this.__containedEvent || 0) + 100;\n                if (e.timeStamp > knownTime) {\n                    doHide = true;\n                }\n            } else {\n\n                stopEvent(e);\n\n                doHide = true;\n            }\n\n            if (doHide && this.hide()) {\n                this.settings.parent.style.pointerEvents = '';\n\n                if (event !== EVENT_CLICK_OUTSIDE) {\n                    this.settings.parent.focus();\n                }\n\n                if (this.onClose) {\n                    this.onClose(this.colour);\n                }\n            }\n        }\n    }, {\n        key: 'movePopup',\n        value: function movePopup(options, open) {\n\n            this.closeHandler();\n\n            this.setOptions(options);\n            if (open) {\n                this.openHandler();\n            }\n        }\n    }, {\n        key: 'setColor',\n        value: function setColor(color, silent) {\n            this._setColor(color, { silent: silent });\n        }\n    }, {\n        key: '_setColor',\n        value: function _setColor(color, flags) {\n            if (typeof color === 'string') {\n                color = color.trim();\n            }\n            if (!color) {\n                return;\n            }\n\n            flags = flags || {};\n            var c = void 0;\n            try {\n\n                c = new Color(color);\n            } catch (ex) {\n                if (flags.failSilently) {\n                    return;\n                }\n                throw ex;\n            }\n\n            if (!this.settings.alpha) {\n                var hsla = c.hsla;\n                hsla[3] = 1;\n                c.hsla = hsla;\n            }\n            this.colour = this.color = c;\n            this._setHSLA(null, null, null, null, flags);\n        }\n    }, {\n        key: 'setColour',\n        value: function setColour(colour, silent) {\n            this.setColor(colour, silent);\n        }\n    }, {\n        key: 'show',\n        value: function show() {\n            var parent = this.settings.parent;\n            if (!parent) {\n                return false;\n            }\n\n            if (this.domElement) {\n                var toggled = this._toggleDOM(true);\n\n                this._setPosition();\n\n                return toggled;\n            }\n\n            var html = this.settings.template || '<div class=\"picker_wrapper\" tabindex=\"-1\"><div class=\"picker_arrow\"></div><div class=\"picker_hue picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_sl\"><div class=\"picker_selector\"></div></div><div class=\"picker_alpha picker_slider\"><div class=\"picker_selector\"></div></div><div class=\"picker_editor\"><input aria-label=\"Type a color name or hex value\"/></div><div class=\"picker_sample\"></div><div class=\"picker_done\"><button>Ok</button></div><div class=\"picker_cancel\"><button>Cancel</button></div></div>';\n            var wrapper = parseHTML(html);\n\n            this.domElement = wrapper;\n            this._domH = $('.picker_hue', wrapper);\n            this._domSL = $('.picker_sl', wrapper);\n            this._domA = $('.picker_alpha', wrapper);\n            this._domEdit = $('.picker_editor input', wrapper);\n            this._domSample = $('.picker_sample', wrapper);\n            this._domOkay = $('.picker_done button', wrapper);\n            this._domCancel = $('.picker_cancel button', wrapper);\n\n            wrapper.classList.add('layout_' + this.settings.layout);\n            if (!this.settings.alpha) {\n                wrapper.classList.add('no_alpha');\n            }\n            if (!this.settings.editor) {\n                wrapper.classList.add('no_editor');\n            }\n            if (!this.settings.cancelButton) {\n                wrapper.classList.add('no_cancel');\n            }\n            this._ifPopup(function () {\n                return wrapper.classList.add('popup');\n            });\n\n            this._setPosition();\n\n            if (this.colour) {\n                this._updateUI();\n            } else {\n                this._setColor(this.settings.defaultColor);\n            }\n            this._bindEvents();\n\n            return true;\n        }\n    }, {\n        key: 'hide',\n        value: function hide() {\n            return this._toggleDOM(false);\n        }\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._events.destroy();\n            if (this.domElement) {\n                this.settings.parent.removeChild(this.domElement);\n            }\n        }\n    }, {\n        key: '_bindEvents',\n        value: function _bindEvents() {\n            var _this2 = this;\n\n            var that = this,\n                dom = this.domElement,\n                events = this._events;\n\n            function addEvent(target, type, handler) {\n                events.add(target, type, handler);\n            }\n\n            addEvent(dom, 'click', function (e) {\n                return e.preventDefault();\n            });\n\n            dragTrack(events, this._domH, function (x, y) {\n                return that._setHSLA(x);\n            });\n\n            dragTrack(events, this._domSL, function (x, y) {\n                return that._setHSLA(null, x, 1 - y);\n            });\n\n            if (this.settings.alpha) {\n                dragTrack(events, this._domA, function (x, y) {\n                    return that._setHSLA(null, null, null, 1 - y);\n                });\n            }\n\n            var editInput = this._domEdit;\n            {\n                addEvent(editInput, 'input', function (e) {\n                    that._setColor(this.value, { fromEditor: true, failSilently: true });\n                });\n\n                addEvent(editInput, 'focus', function (e) {\n                    var input = this;\n\n                    if (input.selectionStart === input.selectionEnd) {\n                        input.select();\n                    }\n                });\n            }\n\n            this._ifPopup(function () {\n\n                var popupCloseProxy = function popupCloseProxy(e) {\n                    return _this2.closeHandler(e);\n                };\n\n                addEvent(window, EVENT_CLICK_OUTSIDE, popupCloseProxy);\n                addEvent(window, EVENT_TAB_MOVE, popupCloseProxy);\n                onKey(events, dom, ['Esc', 'Escape'], popupCloseProxy);\n\n                var timeKeeper = function timeKeeper(e) {\n                    _this2.__containedEvent = e.timeStamp;\n                };\n                addEvent(dom, EVENT_CLICK_OUTSIDE, timeKeeper);\n\n                addEvent(dom, EVENT_TAB_MOVE, timeKeeper);\n\n                addEvent(_this2._domCancel, 'click', popupCloseProxy);\n            });\n\n            var onDoneProxy = function onDoneProxy(e) {\n                _this2._ifPopup(function () {\n                    return _this2.closeHandler(e);\n                });\n                if (_this2.onDone) {\n                    _this2.onDone(_this2.colour);\n                }\n            };\n            addEvent(this._domOkay, 'click', onDoneProxy);\n            onKey(events, dom, ['Enter'], onDoneProxy);\n        }\n    }, {\n        key: '_setPosition',\n        value: function _setPosition() {\n            var parent = this.settings.parent,\n                elm = this.domElement;\n\n            if (parent !== elm.parentNode) {\n                parent.appendChild(elm);\n            }\n\n            this._ifPopup(function (popup) {\n\n                if (getComputedStyle(parent).position === 'static') {\n                    parent.style.position = 'relative';\n                }\n\n                var cssClass = popup === true ? 'popup_right' : 'popup_' + popup;\n\n                ['popup_top', 'popup_bottom', 'popup_left', 'popup_right'].forEach(function (c) {\n\n                    if (c === cssClass) {\n                        elm.classList.add(c);\n                    } else {\n                        elm.classList.remove(c);\n                    }\n                });\n\n                elm.classList.add(cssClass);\n            });\n        }\n    }, {\n        key: '_setHSLA',\n        value: function _setHSLA(h, s, l, a, flags) {\n            flags = flags || {};\n\n            var col = this.colour,\n                hsla = col.hsla;\n\n            [h, s, l, a].forEach(function (x, i) {\n                if (x || x === 0) {\n                    hsla[i] = x;\n                }\n            });\n            col.hsla = hsla;\n\n            this._updateUI(flags);\n\n            if (this.onChange && !flags.silent) {\n                this.onChange(col);\n            }\n        }\n    }, {\n        key: '_updateUI',\n        value: function _updateUI(flags) {\n            if (!this.domElement) {\n                return;\n            }\n            flags = flags || {};\n\n            var col = this.colour,\n                hsl = col.hsla,\n                cssHue = 'hsl(' + hsl[0] * HUES + ', 100%, 50%)',\n                cssHSL = col.hslString,\n                cssHSLA = col.hslaString;\n\n            var uiH = this._domH,\n                uiSL = this._domSL,\n                uiA = this._domA,\n                thumbH = $('.picker_selector', uiH),\n                thumbSL = $('.picker_selector', uiSL),\n                thumbA = $('.picker_selector', uiA);\n\n            function posX(parent, child, relX) {\n                child.style.left = relX * 100 + '%';\n            }\n            function posY(parent, child, relY) {\n                child.style.top = relY * 100 + '%';\n            }\n\n            posX(uiH, thumbH, hsl[0]);\n\n            this._domSL.style.backgroundColor = this._domH.style.color = cssHue;\n\n            posX(uiSL, thumbSL, hsl[1]);\n            posY(uiSL, thumbSL, 1 - hsl[2]);\n\n            uiSL.style.color = cssHSL;\n\n            posY(uiA, thumbA, 1 - hsl[3]);\n\n            var opaque = cssHSL,\n                transp = opaque.replace('hsl', 'hsla').replace(')', ', 0)'),\n                bg = 'linear-gradient(' + [opaque, transp] + ')';\n\n            this._domA.style.background = bg + ', ' + BG_TRANSP;\n\n            if (!flags.fromEditor) {\n                var format = this.settings.editorFormat,\n                    alpha = this.settings.alpha;\n\n                var value = void 0;\n                switch (format) {\n                    case 'rgb':\n                        value = col.printRGB(alpha);break;\n                    case 'hsl':\n                        value = col.printHSL(alpha);break;\n                    default:\n                        value = col.printHex(alpha);\n                }\n                this._domEdit.value = value;\n            }\n\n            this._domSample.style.color = cssHSLA;\n        }\n    }, {\n        key: '_ifPopup',\n        value: function _ifPopup(actionIf, actionElse) {\n            if (this.settings.parent && this.settings.popup) {\n                actionIf && actionIf(this.settings.popup);\n            } else {\n                actionElse && actionElse();\n            }\n        }\n    }, {\n        key: '_toggleDOM',\n        value: function _toggleDOM(toVisible) {\n            var dom = this.domElement;\n            if (!dom) {\n                return false;\n            }\n\n            var displayStyle = toVisible ? '' : 'none',\n                toggle = dom.style.display !== displayStyle;\n\n            if (toggle) {\n                dom.style.display = displayStyle;\n            }\n            return toggle;\n        }\n    }]);\n    return Picker;\n}();\n\n{\n    var style = document.createElement('style');\n    style.textContent = '.picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:flex;flex-flow:row wrap;justify-content:space-between;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:\"\";display:block;width:100%;height:0;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{flex:1 1 auto}.layout_default .picker_sl::before{content:\"\";display:block;padding-bottom:100%}.layout_default .picker_editor{order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{order:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px #1e90ff}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:#f5f5f5;background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:#fff}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid #fff;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:linear-gradient(180deg, white, rgba(255, 255, 255, 0) 50%),linear-gradient(0deg, black, rgba(0, 0, 0, 0) 50%),linear-gradient(90deg, #808080, rgba(128, 128, 128, 0))}.picker_alpha,.picker_sample{position:relative;background:linear-gradient(45deg, lightgrey 25%, transparent 25%, transparent 75%, lightgrey 75%) 0 0/2em 2em,linear-gradient(45deg, lightgrey 25%, white 25%, white 75%, lightgrey 75%) 1em 1em/2em 2em;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:\"\";position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}';\n    document.documentElement.firstElementChild.appendChild(style);\n\n    Picker.StyleElement = style;\n}\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9ub2RlX21vZHVsZXMvdmFuaWxsYS1waWNrZXIvZGlzdC92YW5pbGxhLXBpY2tlci5tanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esb0JBQW9CLGtCQUFrQjtBQUN0QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxnREFBZ0QsK0JBQStCO0FBQy9FOztBQUVBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CO0FBQ0EsS0FBSztBQUNMOztBQUVBLG1CQUFtQjs7QUFFbkI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7QUFDQTtBQUNBLGFBQWE7QUFDYixTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUEscUZBQXFGLEVBQUUsNEVBQTRFLEVBQUU7O0FBRXJLLDBDQUEwQyxFQUFFO0FBQzVDLG9EQUFvRDtBQUNwRDs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsY0FBYztBQUNkO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMERBQTBEO0FBQzFEO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0EsNENBQTRDO0FBQzVDOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7O0FBRWpCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxjQUFjOztBQUVkOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLG9DQUFvQyxnQkFBZ0I7QUFDcEQ7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxjQUFjO0FBQ2Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7O0FBRWI7O0FBRUE7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0EsYUFBYTs7QUFFYjtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaURBQWlELHNDQUFzQztBQUN2RixpQkFBaUI7O0FBRWpCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxzQkFBc0I7QUFDdEI7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQSxhQUFhO0FBQ2I7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0Esb0RBQW9EO0FBQ3BEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLGdFQUFnRSxhQUFhLHlDQUF5QyxrQkFBa0IsV0FBVyxVQUFVLHlDQUF5QyxhQUFhLCtCQUErQixhQUFhLG1CQUFtQiw4QkFBOEIsb0JBQW9CLGVBQWUsV0FBVyxhQUFhLDJFQUEyRSxlQUFlLGlDQUFpQyxZQUFZLHVDQUF1QyxXQUFXLGNBQWMsV0FBVyxTQUFTLFFBQVEsZ0VBQWdFLFlBQVksNEJBQTRCLFdBQVcsMkJBQTJCLGNBQWMsbUNBQW1DLFdBQVcsY0FBYyxvQkFBb0IsK0JBQStCLFFBQVEsYUFBYSxxQ0FBcUMsV0FBVyxZQUFZLCtCQUErQixRQUFRLGNBQWMsNERBQTRELFFBQVEsZ0JBQWdCLHNCQUFzQixtQkFBbUIsNEJBQTRCLGVBQWUsdUJBQXVCLFdBQVcsb0JBQW9CLHNCQUFzQixhQUFhLDZDQUE2QyxzQkFBc0IsWUFBWSw0QkFBNEIsYUFBYSxvSEFBb0gsK0JBQStCLHVCQUF1QixrQkFBa0IsZUFBZSx5QkFBeUIsK0RBQStELDhCQUE4QiwrREFBK0QsNkJBQTZCLHNCQUFzQixpQkFBaUIsa0JBQWtCLFVBQVUsY0FBYyx3Q0FBd0MsZ0NBQWdDLHNCQUFzQixtQkFBbUIsK0JBQStCLHdCQUF3QixlQUFlLGdDQUFnQyxrQkFBa0IsWUFBWSxrQkFBa0IscUZBQXFGLDRCQUE0QixXQUFXLGtCQUFrQiw0QkFBNEIsdUxBQXVMLDZCQUE2QixrQkFBa0IseU1BQXlNLDRCQUE0QiwrREFBK0QsZ0JBQWdCLHFCQUFxQixzQkFBc0Isa0JBQWtCLHVCQUF1QixXQUFXLGtCQUFrQixjQUFjLFdBQVcsWUFBWSx3QkFBd0IsY0FBYyxrQkFBa0IsV0FBVyxzQkFBc0Isa0JBQWtCLFVBQVUsYUFBYSw2R0FBNkcsbUJBQW1CLHVDQUF1QyxvQ0FBb0MsVUFBVSxXQUFXLFNBQVMsdUZBQXVGLFdBQVcsY0FBYyxrQkFBa0IsTUFBTSxPQUFPLFlBQVksNENBQTRDLFdBQVcsWUFBWSw4QkFBOEIsc0JBQXNCLGdDQUFnQyx3QkFBd0IsMkNBQTJDLFdBQVcsWUFBWSxnQkFBZ0IsaUJBQWlCLFlBQVksT0FBTywrQkFBK0IsU0FBUyxPQUFPLGlDQUFpQyx5QkFBeUIsb0JBQW9CLFNBQVMsT0FBTyxrQ0FBa0MsTUFBTSxPQUFPLDZDQUE2QyxxQ0FBcUMsa0JBQWtCLE1BQU0sV0FBVyxnQ0FBZ0MsTUFBTSxRQUFRLCtCQUErQix1QkFBdUIsbUJBQW1CLE1BQU0sVUFBVSxpQ0FBaUMsTUFBTSxPQUFPO0FBQ3hySTs7QUFFQTtBQUNBOztBQUU2QiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9ub2RlX21vZHVsZXMvdmFuaWxsYS1waWNrZXIvZGlzdC92YW5pbGxhLXBpY2tlci5tanM/OWQ2NiJdLCJzb3VyY2VzQ29udGVudCI6WyIvKiFcbiAqIHZhbmlsbGEtcGlja2VyIHYyLjEyLjNcbiAqIGh0dHBzOi8vdmFuaWxsYS1waWNrZXIuanMub3JnXG4gKlxuICogQ29weXJpZ2h0IDIwMTctMjAyNCBBbmRyZWFzIEJvcmdlbiAoaHR0cHM6Ly9naXRodWIuY29tL1NwaGlueHh4eCksIEFkYW0gQnJvb2tzIChodHRwczovL2dpdGh1Yi5jb20vZGlzc2ltdWxhdGUpXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgSVNDIGxpY2Vuc2UuXG4gKi9cbnZhciBjbGFzc0NhbGxDaGVjayA9IGZ1bmN0aW9uIChpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHtcbiAgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpO1xuICB9XG59O1xuXG52YXIgY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykge1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07XG4gICAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7XG4gICAgICBkZXNjcmlwdG9yLmNvbmZpZ3VyYWJsZSA9IHRydWU7XG4gICAgICBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlO1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoQ29uc3RydWN0b3IsIHByb3RvUHJvcHMsIHN0YXRpY1Byb3BzKSB7XG4gICAgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTtcbiAgICBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTtcbiAgICByZXR1cm4gQ29uc3RydWN0b3I7XG4gIH07XG59KCk7XG5cbnZhciBzbGljZWRUb0FycmF5ID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBzbGljZUl0ZXJhdG9yKGFyciwgaSkge1xuICAgIHZhciBfYXJyID0gW107XG4gICAgdmFyIF9uID0gdHJ1ZTtcbiAgICB2YXIgX2QgPSBmYWxzZTtcbiAgICB2YXIgX2UgPSB1bmRlZmluZWQ7XG5cbiAgICB0cnkge1xuICAgICAgZm9yICh2YXIgX2kgPSBhcnJbU3ltYm9sLml0ZXJhdG9yXSgpLCBfczsgIShfbiA9IChfcyA9IF9pLm5leHQoKSkuZG9uZSk7IF9uID0gdHJ1ZSkge1xuICAgICAgICBfYXJyLnB1c2goX3MudmFsdWUpO1xuXG4gICAgICAgIGlmIChpICYmIF9hcnIubGVuZ3RoID09PSBpKSBicmVhaztcbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIF9kID0gdHJ1ZTtcbiAgICAgIF9lID0gZXJyO1xuICAgIH0gZmluYWxseSB7XG4gICAgICB0cnkge1xuICAgICAgICBpZiAoIV9uICYmIF9pW1wicmV0dXJuXCJdKSBfaVtcInJldHVyblwiXSgpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgaWYgKF9kKSB0aHJvdyBfZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gX2FycjtcbiAgfVxuXG4gIHJldHVybiBmdW5jdGlvbiAoYXJyLCBpKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkoYXJyKSkge1xuICAgICAgcmV0dXJuIGFycjtcbiAgICB9IGVsc2UgaWYgKFN5bWJvbC5pdGVyYXRvciBpbiBPYmplY3QoYXJyKSkge1xuICAgICAgcmV0dXJuIHNsaWNlSXRlcmF0b3IoYXJyLCBpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIik7XG4gICAgfVxuICB9O1xufSgpO1xuXG5TdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggPSBTdHJpbmcucHJvdG90eXBlLnN0YXJ0c1dpdGggfHwgZnVuY3Rpb24gKG5lZWRsZSkge1xuICAgIHJldHVybiB0aGlzLmluZGV4T2YobmVlZGxlKSA9PT0gMDtcbn07XG5TdHJpbmcucHJvdG90eXBlLnBhZFN0YXJ0ID0gU3RyaW5nLnByb3RvdHlwZS5wYWRTdGFydCB8fCBmdW5jdGlvbiAobGVuLCBwYWQpIHtcbiAgICB2YXIgc3RyID0gdGhpczt3aGlsZSAoc3RyLmxlbmd0aCA8IGxlbikge1xuICAgICAgICBzdHIgPSBwYWQgKyBzdHI7XG4gICAgfXJldHVybiBzdHI7XG59O1xuXG52YXIgY29sb3JOYW1lcyA9IHsgY2I6ICcwZjhmZicsIHRxdzogJ2FlYmQ3JywgcTogJy1mZmZmJywgcW1ybjogJzdmZmZkNCcsIHpyOiAnMGZmZmYnLCBiZzogJzVmNWRjJywgYnNxOiAnZTRjNCcsIGJjazogJy0tLScsIG5jaDogJ2ViY2QnLCBiOiAnLS1mZicsIGJ2dDogJzhhMmJlMicsIGJyd246ICdhNTJhMmEnLCBicnc6ICdkZWI4ODcnLCBjdGI6ICc1ZjllYTAnLCBocnQ6ICc3ZmZmLScsIGNoY1Q6ICdkMjY5MWUnLCBjcjogJzdmNTAnLCBybnc6ICc2NDk1ZWQnLCBjcm5zOiAnOGRjJywgY3JtczogJ2RjMTQzYycsIGNuOiAnLWZmZmYnLCBEYjogJy0tOGInLCBEY246ICctOGI4YicsIERnbnI6ICdiODg2MGInLCBEZ3I6ICdhOWE5YTknLCBEZ3JuOiAnLTY0LScsIERraGs6ICdiZGI3NmInLCBEbWduOiAnOGItOGInLCBEdmdyOiAnNTU2YjJmJywgRHJuZzogJzhjLScsIERyY2g6ICc5OTMyY2MnLCBEcjogJzhiLS0nLCBEc21uOiAnZTk5NjdhJywgRHNncjogJzhmYmM4ZicsIERzVGI6ICc0ODNkOGInLCBEc1RnOiAnMmY0ZjRmJywgRHRycTogJy1jZWQxJywgRHZ0OiAnOTQtZDMnLCBwcG5rOiAnMTQ5MycsIHBza2I6ICctYmZmZicsIG1ncjogJzY5Njk2OScsIGdyYjogJzFlOTBmZicsIHJicmM6ICdiMjIyMjInLCByd2h0OiAnYWYwJywgc3RnOiAnMjI4YjIyJywgY2hzOiAnLWZmJywgZ25zYjogJ2RjZGNkYycsIHN0OiAnOGY4ZmYnLCBnOiAnZDctJywgZ25yOiAnZGFhNTIwJywgZ3I6ICc4MDgwODAnLCBncm46ICctOC0wJywgZ3JudzogJ2FkZmYyZicsIGhudzogJzBmZmYwJywgaHRwbjogJzY5YjQnLCBubnI6ICdjZDVjNWMnLCBuZzogJzRiLTgyJywgdnI6ICcwJywga2hrOiAnMGU2OGMnLCB2bnI6ICdlNmU2ZmEnLCBucmI6ICcwZjUnLCB3bmdyOiAnN2NmYy0nLCBtbmNoOiAnYWNkJywgTGI6ICdhZGQ4ZTYnLCBMY3I6ICcwODA4MCcsIExjbjogJ2UwZmZmZicsIExnbnI6ICdhZmFkMicsIExncjogJ2QzZDNkMycsIExncm46ICc5MGVlOTAnLCBMcG5rOiAnYjZjMScsIExzbW46ICdhMDdhJywgTHNncjogJzIwYjJhYScsIExza2I6ICc4N2NlZmEnLCBMc1RnOiAnNzc4ODk5JywgTHN0YjogJ2IwYzRkZScsIEx3OiAnZTAnLCBtOiAnLWZmLScsIG1ncm46ICczMmNkMzInLCBubjogJ2FmMGU2JywgbWdudDogJy1mZicsIG1ybjogJzgtLTAnLCBtcW06ICc2NmNkYWEnLCBtbWI6ICctLWNkJywgbW1yYzogJ2JhNTVkMycsIG1tcHI6ICc5MzcwZGInLCBtc2c6ICczY2IzNzEnLCBtbXNUOiAnN2I2OGVlJywgJyc6ICctZmE5YScsIG10cjogJzQ4ZDFjYycsIG1tdnQ6ICdjNzE1ODUnLCBtbkxiOiAnMTkxOTcwJywgbnRjOiAnNWZmZmEnLCBtc3RyOiAnZTRlMScsIG1jY3M6ICdlNGI1Jywgdmp3OiAnZGVhZCcsIG52OiAnLS04MCcsIGM6ICdkZjVlNicsIHY6ICc4MDgtMCcsIHZyYjogJzZiOGUyMycsIHJuZzogJ2E1LScsIHJuZ3I6ICc0NS0nLCByY2g6ICdkYTcwZDYnLCBwZ25yOiAnZWVlOGFhJywgcGdybjogJzk4ZmI5OCcsIHB0cnE6ICdhZmVlZWUnLCBwdnRyOiAnZGI3MDkzJywgcHB3aDogJ2VmZDUnLCBwY2hwOiAnZGFiOScsIHByOiAnY2Q4NTNmJywgcG5rOiAnYzBjYicsIHBtOiAnZGRhMGRkJywgcHdyYjogJ2IwZTBlNicsIHBycDogJzgtMDgwJywgY2M6ICc2NjMzOTknLCByOiAnLS0nLCBzYnI6ICdiYzhmOGYnLCByYjogJzQxNjllMScsIHNicnc6ICc4YjQ1MTMnLCBzbW46ICdhODA3MicsIG5icjogJzRhNDYwJywgc2dybjogJzJlOGI1NycsIHNzaDogJzVlZScsIHNubjogJ2EwNTIyZCcsIHN2cjogJ2MwYzBjMCcsIHNrYjogJzg3Y2VlYicsIHNUYjogJzZhNWFjZCcsIHNUZ3I6ICc3MDgwOTAnLCBzbnc6ICdhZmEnLCBuOiAnLWZmN2YnLCBzdGI6ICc0NjgyYjQnLCB0bjogJ2QyYjQ4YycsIHQ6ICctODA4MCcsIHRoc3Q6ICdkOGJmZDgnLCB0bVQ6ICc2MzQ3JywgdHJxczogJzQwZTBkMCcsIHZ0OiAnZWU4MmVlJywgd2hUOiAnNWRlYjMnLCB3aHQ6ICcnLCBodHM6ICc1ZjVmNScsIHc6ICctJywgd2dybjogJzlhY2QzMicgfTtcblxuZnVuY3Rpb24gcHJpbnROdW0obnVtKSB7XG4gICAgdmFyIGRlY3MgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IDE7XG5cbiAgICB2YXIgc3RyID0gZGVjcyA+IDAgPyBudW0udG9GaXhlZChkZWNzKS5yZXBsYWNlKC8wKyQvLCAnJykucmVwbGFjZSgvXFwuJC8sICcnKSA6IG51bS50b1N0cmluZygpO1xuICAgIHJldHVybiBzdHIgfHwgJzAnO1xufVxuXG52YXIgQ29sb3IgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gQ29sb3IociwgZywgYiwgYSkge1xuICAgICAgICBjbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xvcik7XG5cblxuICAgICAgICB2YXIgdGhhdCA9IHRoaXM7XG4gICAgICAgIGZ1bmN0aW9uIHBhcnNlU3RyaW5nKGlucHV0KSB7XG5cbiAgICAgICAgICAgIGlmIChpbnB1dC5zdGFydHNXaXRoKCdoc2wnKSkge1xuICAgICAgICAgICAgICAgIHZhciBfaW5wdXQkbWF0Y2gkbWFwID0gaW5wdXQubWF0Y2goLyhbXFwtXFxkXFwuZV0rKS9nKS5tYXAoTnVtYmVyKSxcbiAgICAgICAgICAgICAgICAgICAgX2lucHV0JG1hdGNoJG1hcDIgPSBzbGljZWRUb0FycmF5KF9pbnB1dCRtYXRjaCRtYXAsIDQpLFxuICAgICAgICAgICAgICAgICAgICBoID0gX2lucHV0JG1hdGNoJG1hcDJbMF0sXG4gICAgICAgICAgICAgICAgICAgIHMgPSBfaW5wdXQkbWF0Y2gkbWFwMlsxXSxcbiAgICAgICAgICAgICAgICAgICAgbCA9IF9pbnB1dCRtYXRjaCRtYXAyWzJdLFxuICAgICAgICAgICAgICAgICAgICBfYSA9IF9pbnB1dCRtYXRjaCRtYXAyWzNdO1xuXG4gICAgICAgICAgICAgICAgaWYgKF9hID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2EgPSAxO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGggLz0gMzYwO1xuICAgICAgICAgICAgICAgIHMgLz0gMTAwO1xuICAgICAgICAgICAgICAgIGwgLz0gMTAwO1xuICAgICAgICAgICAgICAgIHRoYXQuaHNsYSA9IFtoLCBzLCBsLCBfYV07XG4gICAgICAgICAgICB9IGVsc2UgaWYgKGlucHV0LnN0YXJ0c1dpdGgoJ3JnYicpKSB7XG4gICAgICAgICAgICAgICAgdmFyIF9pbnB1dCRtYXRjaCRtYXAzID0gaW5wdXQubWF0Y2goLyhbXFwtXFxkXFwuZV0rKS9nKS5tYXAoTnVtYmVyKSxcbiAgICAgICAgICAgICAgICAgICAgX2lucHV0JG1hdGNoJG1hcDQgPSBzbGljZWRUb0FycmF5KF9pbnB1dCRtYXRjaCRtYXAzLCA0KSxcbiAgICAgICAgICAgICAgICAgICAgX3IgPSBfaW5wdXQkbWF0Y2gkbWFwNFswXSxcbiAgICAgICAgICAgICAgICAgICAgX2cgPSBfaW5wdXQkbWF0Y2gkbWFwNFsxXSxcbiAgICAgICAgICAgICAgICAgICAgX2IgPSBfaW5wdXQkbWF0Y2gkbWFwNFsyXSxcbiAgICAgICAgICAgICAgICAgICAgX2EyID0gX2lucHV0JG1hdGNoJG1hcDRbM107XG5cbiAgICAgICAgICAgICAgICBpZiAoX2EyID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgX2EyID0gMTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0aGF0LnJnYmEgPSBbX3IsIF9nLCBfYiwgX2EyXTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGlucHV0LnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICAgICAgICAgICAgICB0aGF0LnJnYmEgPSBDb2xvci5oZXhUb1JnYihpbnB1dCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5yZ2JhID0gQ29sb3IubmFtZVRvUmdiKGlucHV0KSB8fCBDb2xvci5oZXhUb1JnYihpbnB1dCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHIgPT09IHVuZGVmaW5lZCkgOyBlbHNlIGlmIChBcnJheS5pc0FycmF5KHIpKSB7XG4gICAgICAgICAgICB0aGlzLnJnYmEgPSByO1xuICAgICAgICB9IGVsc2UgaWYgKGIgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdmFyIGNvbG9yID0gciAmJiAnJyArIHI7XG4gICAgICAgICAgICBpZiAoY29sb3IpIHtcbiAgICAgICAgICAgICAgICBwYXJzZVN0cmluZyhjb2xvci50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMucmdiYSA9IFtyLCBnLCBiLCBhID09PSB1bmRlZmluZWQgPyAxIDogYV07XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjcmVhdGVDbGFzcyhDb2xvciwgW3tcbiAgICAgICAga2V5OiAncHJpbnRSR0InLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJpbnRSR0IoYWxwaGEpIHtcbiAgICAgICAgICAgIHZhciByZ2IgPSBhbHBoYSA/IHRoaXMucmdiYSA6IHRoaXMucmdiYS5zbGljZSgwLCAzKSxcbiAgICAgICAgICAgICAgICB2YWxzID0gcmdiLm1hcChmdW5jdGlvbiAoeCwgaSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBwcmludE51bSh4LCBpID09PSAzID8gMyA6IDApO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBhbHBoYSA/ICdyZ2JhKCcgKyB2YWxzICsgJyknIDogJ3JnYignICsgdmFscyArICcpJztcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncHJpbnRIU0wnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcHJpbnRIU0woYWxwaGEpIHtcbiAgICAgICAgICAgIHZhciBtdWx0cyA9IFszNjAsIDEwMCwgMTAwLCAxXSxcbiAgICAgICAgICAgICAgICBzdWZmID0gWycnLCAnJScsICclJywgJyddO1xuXG4gICAgICAgICAgICB2YXIgaHNsID0gYWxwaGEgPyB0aGlzLmhzbGEgOiB0aGlzLmhzbGEuc2xpY2UoMCwgMyksXG4gICAgICAgICAgICAgICAgdmFscyA9IGhzbC5tYXAoZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcHJpbnROdW0oeCAqIG11bHRzW2ldLCBpID09PSAzID8gMyA6IDEpICsgc3VmZltpXTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gYWxwaGEgPyAnaHNsYSgnICsgdmFscyArICcpJyA6ICdoc2woJyArIHZhbHMgKyAnKSc7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3ByaW50SGV4JyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByaW50SGV4KGFscGhhKSB7XG4gICAgICAgICAgICB2YXIgaGV4ID0gdGhpcy5oZXg7XG4gICAgICAgICAgICByZXR1cm4gYWxwaGEgPyBoZXggOiBoZXguc3Vic3RyaW5nKDAsIDcpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZ2JhJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5fcmdiYSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLl9yZ2JhO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLl9oc2xhKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBjb2xvciBpcyBzZXQnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3JnYmEgPSBDb2xvci5oc2xUb1JnYih0aGlzLl9oc2xhKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQocmdiKSB7XG4gICAgICAgICAgICBpZiAocmdiLmxlbmd0aCA9PT0gMykge1xuICAgICAgICAgICAgICAgIHJnYlszXSA9IDE7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX3JnYmEgPSByZ2I7XG4gICAgICAgICAgICB0aGlzLl9oc2xhID0gbnVsbDtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAncmdiU3RyaW5nJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmludFJHQigpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZ2JhU3RyaW5nJyxcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7XG4gICAgICAgICAgICByZXR1cm4gdGhpcy5wcmludFJHQih0cnVlKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaHNsYScsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgaWYgKHRoaXMuX2hzbGEpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5faHNsYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghdGhpcy5fcmdiYSkge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gY29sb3IgaXMgc2V0Jyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiB0aGlzLl9oc2xhID0gQ29sb3IucmdiVG9Ic2wodGhpcy5fcmdiYSk7XG4gICAgICAgIH0sXG4gICAgICAgIHNldDogZnVuY3Rpb24gc2V0KGhzbCkge1xuICAgICAgICAgICAgaWYgKGhzbC5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgICAgICAgICBoc2xbM10gPSAxO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9oc2xhID0gaHNsO1xuICAgICAgICAgICAgdGhpcy5fcmdiYSA9IG51bGw7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hzbFN0cmluZycsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpbnRIU0woKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaHNsYVN0cmluZycsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMucHJpbnRIU0wodHJ1ZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hleCcsXG4gICAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkge1xuICAgICAgICAgICAgdmFyIHJnYiA9IHRoaXMucmdiYSxcbiAgICAgICAgICAgICAgICBoZXggPSByZ2IubWFwKGZ1bmN0aW9uICh4LCBpKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGkgPCAzID8geC50b1N0cmluZygxNikgOiBNYXRoLnJvdW5kKHggKiAyNTUpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICByZXR1cm4gJyMnICsgaGV4Lm1hcChmdW5jdGlvbiAoeCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB4LnBhZFN0YXJ0KDIsICcwJyk7XG4gICAgICAgICAgICB9KS5qb2luKCcnKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2V0OiBmdW5jdGlvbiBzZXQoaGV4KSB7XG4gICAgICAgICAgICB0aGlzLnJnYmEgPSBDb2xvci5oZXhUb1JnYihoZXgpO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ2hleFRvUmdiJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhleFRvUmdiKGlucHV0KSB7XG5cbiAgICAgICAgICAgIHZhciBoZXggPSAoaW5wdXQuc3RhcnRzV2l0aCgnIycpID8gaW5wdXQuc2xpY2UoMSkgOiBpbnB1dCkucmVwbGFjZSgvXihcXHd7M30pJC8sICckMUYnKS5yZXBsYWNlKC9eKFxcdykoXFx3KShcXHcpKFxcdykkLywgJyQxJDEkMiQyJDMkMyQ0JDQnKS5yZXBsYWNlKC9eKFxcd3s2fSkkLywgJyQxRkYnKTtcblxuICAgICAgICAgICAgaWYgKCFoZXgubWF0Y2goL14oWzAtOWEtZkEtRl17OH0pJC8pKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIGhleCBjb2xvcjsgJyArIGlucHV0KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIHJnYmEgPSBoZXgubWF0Y2goL14oXFx3XFx3KShcXHdcXHcpKFxcd1xcdykoXFx3XFx3KSQvKS5zbGljZSgxKS5tYXAoZnVuY3Rpb24gKHgpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gcGFyc2VJbnQoeCwgMTYpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJnYmFbM10gPSByZ2JhWzNdIC8gMjU1O1xuICAgICAgICAgICAgcmV0dXJuIHJnYmE7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ25hbWVUb1JnYicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBuYW1lVG9SZ2IoaW5wdXQpIHtcblxuICAgICAgICAgICAgdmFyIGhhc2ggPSBpbnB1dC50b0xvd2VyQ2FzZSgpLnJlcGxhY2UoJ2F0JywgJ1QnKS5yZXBsYWNlKC9bYWVpb3V5bGRmXS9nLCAnJykucmVwbGFjZSgnZ2h0JywgJ0wnKS5yZXBsYWNlKCdyaycsICdEJykuc2xpY2UoLTUsIDQpLFxuICAgICAgICAgICAgICAgIGhleCA9IGNvbG9yTmFtZXNbaGFzaF07XG4gICAgICAgICAgICByZXR1cm4gaGV4ID09PSB1bmRlZmluZWQgPyBoZXggOiBDb2xvci5oZXhUb1JnYihoZXgucmVwbGFjZSgvXFwtL2csICcwMCcpLnBhZFN0YXJ0KDYsICdmJykpO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZ2JUb0hzbCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiByZ2JUb0hzbChfcmVmKSB7XG4gICAgICAgICAgICB2YXIgX3JlZjIgPSBzbGljZWRUb0FycmF5KF9yZWYsIDQpLFxuICAgICAgICAgICAgICAgIHIgPSBfcmVmMlswXSxcbiAgICAgICAgICAgICAgICBnID0gX3JlZjJbMV0sXG4gICAgICAgICAgICAgICAgYiA9IF9yZWYyWzJdLFxuICAgICAgICAgICAgICAgIGEgPSBfcmVmMlszXTtcblxuICAgICAgICAgICAgciAvPSAyNTU7XG4gICAgICAgICAgICBnIC89IDI1NTtcbiAgICAgICAgICAgIGIgLz0gMjU1O1xuXG4gICAgICAgICAgICB2YXIgbWF4ID0gTWF0aC5tYXgociwgZywgYiksXG4gICAgICAgICAgICAgICAgbWluID0gTWF0aC5taW4ociwgZywgYik7XG4gICAgICAgICAgICB2YXIgaCA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgICBzID0gdm9pZCAwLFxuICAgICAgICAgICAgICAgIGwgPSAobWF4ICsgbWluKSAvIDI7XG5cbiAgICAgICAgICAgIGlmIChtYXggPT09IG1pbikge1xuICAgICAgICAgICAgICAgIGggPSBzID0gMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdmFyIGQgPSBtYXggLSBtaW47XG4gICAgICAgICAgICAgICAgcyA9IGwgPiAwLjUgPyBkIC8gKDIgLSBtYXggLSBtaW4pIDogZCAvIChtYXggKyBtaW4pO1xuICAgICAgICAgICAgICAgIHN3aXRjaCAobWF4KSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgcjpcbiAgICAgICAgICAgICAgICAgICAgICAgIGggPSAoZyAtIGIpIC8gZCArIChnIDwgYiA/IDYgOiAwKTticmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBnOlxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChiIC0gcikgLyBkICsgMjticmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSBiOlxuICAgICAgICAgICAgICAgICAgICAgICAgaCA9IChyIC0gZykgLyBkICsgNDticmVhaztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBoIC89IDY7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBbaCwgcywgbCwgYV07XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2hzbFRvUmdiJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGhzbFRvUmdiKF9yZWYzKSB7XG4gICAgICAgICAgICB2YXIgX3JlZjQgPSBzbGljZWRUb0FycmF5KF9yZWYzLCA0KSxcbiAgICAgICAgICAgICAgICBoID0gX3JlZjRbMF0sXG4gICAgICAgICAgICAgICAgcyA9IF9yZWY0WzFdLFxuICAgICAgICAgICAgICAgIGwgPSBfcmVmNFsyXSxcbiAgICAgICAgICAgICAgICBhID0gX3JlZjRbM107XG5cbiAgICAgICAgICAgIHZhciByID0gdm9pZCAwLFxuICAgICAgICAgICAgICAgIGcgPSB2b2lkIDAsXG4gICAgICAgICAgICAgICAgYiA9IHZvaWQgMDtcblxuICAgICAgICAgICAgaWYgKHMgPT09IDApIHtcbiAgICAgICAgICAgICAgICByID0gZyA9IGIgPSBsO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICB2YXIgaHVlMnJnYiA9IGZ1bmN0aW9uIGh1ZTJyZ2IocCwgcSwgdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAodCA8IDApIHQgKz0gMTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPiAxKSB0IC09IDE7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0IDwgMSAvIDYpIHJldHVybiBwICsgKHEgLSBwKSAqIDYgKiB0O1xuICAgICAgICAgICAgICAgICAgICBpZiAodCA8IDEgLyAyKSByZXR1cm4gcTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgPCAyIC8gMykgcmV0dXJuIHAgKyAocSAtIHApICogKDIgLyAzIC0gdCkgKiA2O1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdmFyIHEgPSBsIDwgMC41ID8gbCAqICgxICsgcykgOiBsICsgcyAtIGwgKiBzLFxuICAgICAgICAgICAgICAgICAgICBwID0gMiAqIGwgLSBxO1xuXG4gICAgICAgICAgICAgICAgciA9IGh1ZTJyZ2IocCwgcSwgaCArIDEgLyAzKTtcbiAgICAgICAgICAgICAgICBnID0gaHVlMnJnYihwLCBxLCBoKTtcbiAgICAgICAgICAgICAgICBiID0gaHVlMnJnYihwLCBxLCBoIC0gMSAvIDMpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgcmdiYSA9IFtyICogMjU1LCBnICogMjU1LCBiICogMjU1XS5tYXAoTWF0aC5yb3VuZCk7XG4gICAgICAgICAgICByZ2JhWzNdID0gYTtcblxuICAgICAgICAgICAgcmV0dXJuIHJnYmE7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIENvbG9yO1xufSgpO1xuXG52YXIgRXZlbnRCdWNrZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gRXZlbnRCdWNrZXQoKSB7XG4gICAgICAgIGNsYXNzQ2FsbENoZWNrKHRoaXMsIEV2ZW50QnVja2V0KTtcblxuICAgICAgICB0aGlzLl9ldmVudHMgPSBbXTtcbiAgICB9XG5cbiAgICBjcmVhdGVDbGFzcyhFdmVudEJ1Y2tldCwgW3tcbiAgICAgICAga2V5OiAnYWRkJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZCh0YXJnZXQsIHR5cGUsIGhhbmRsZXIpIHtcbiAgICAgICAgICAgIHRhcmdldC5hZGRFdmVudExpc3RlbmVyKHR5cGUsIGhhbmRsZXIsIGZhbHNlKTtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5wdXNoKHtcbiAgICAgICAgICAgICAgICB0YXJnZXQ6IHRhcmdldCxcbiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgICAgIGhhbmRsZXI6IGhhbmRsZXJcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdyZW1vdmUnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gcmVtb3ZlKHRhcmdldCwgdHlwZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzID0gdGhpcy5fZXZlbnRzLmZpbHRlcihmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHZhciBpc01hdGNoID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICBpZiAodGFyZ2V0ICYmIHRhcmdldCAhPT0gZS50YXJnZXQpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNNYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodHlwZSAmJiB0eXBlICE9PSBlLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNNYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAoaGFuZGxlciAmJiBoYW5kbGVyICE9PSBlLmhhbmRsZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaXNNYXRjaCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChpc01hdGNoKSB7XG4gICAgICAgICAgICAgICAgICAgIEV2ZW50QnVja2V0Ll9kb1JlbW92ZShlLnRhcmdldCwgZS50eXBlLCBlLmhhbmRsZXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXR1cm4gIWlzTWF0Y2g7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnZGVzdHJveScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmZvckVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gRXZlbnRCdWNrZXQuX2RvUmVtb3ZlKGUudGFyZ2V0LCBlLnR5cGUsIGUuaGFuZGxlcik7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cyA9IFtdO1xuICAgICAgICB9XG4gICAgfV0sIFt7XG4gICAgICAgIGtleTogJ19kb1JlbW92ZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZG9SZW1vdmUodGFyZ2V0LCB0eXBlLCBoYW5kbGVyKSB7XG4gICAgICAgICAgICB0YXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcih0eXBlLCBoYW5kbGVyLCBmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIEV2ZW50QnVja2V0O1xufSgpO1xuXG5mdW5jdGlvbiBwYXJzZUhUTUwoaHRtbFN0cmluZykge1xuXG4gICAgdmFyIGRpdiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgIGRpdi5pbm5lckhUTUwgPSBodG1sU3RyaW5nO1xuICAgIHJldHVybiBkaXYuZmlyc3RFbGVtZW50Q2hpbGQ7XG59XG5cbmZ1bmN0aW9uIGRyYWdUcmFjayhldmVudEJ1Y2tldCwgYXJlYSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZHJhZ2dpbmcgPSBmYWxzZTtcblxuICAgIGZ1bmN0aW9uIGNsYW1wKHZhbCwgbWluLCBtYXgpIHtcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KG1pbiwgTWF0aC5taW4odmFsLCBtYXgpKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbk1vdmUoZSwgaW5mbywgc3RhcnRpbmcpIHtcbiAgICAgICAgaWYgKHN0YXJ0aW5nKSB7XG4gICAgICAgICAgICBkcmFnZ2luZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCFkcmFnZ2luZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgIHZhciBib3VuZHMgPSBhcmVhLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxuICAgICAgICAgICAgdyA9IGJvdW5kcy53aWR0aCxcbiAgICAgICAgICAgIGggPSBib3VuZHMuaGVpZ2h0LFxuICAgICAgICAgICAgeCA9IGluZm8uY2xpZW50WCxcbiAgICAgICAgICAgIHkgPSBpbmZvLmNsaWVudFk7XG5cbiAgICAgICAgdmFyIHJlbFggPSBjbGFtcCh4IC0gYm91bmRzLmxlZnQsIDAsIHcpLFxuICAgICAgICAgICAgcmVsWSA9IGNsYW1wKHkgLSBib3VuZHMudG9wLCAwLCBoKTtcblxuICAgICAgICBjYWxsYmFjayhyZWxYIC8gdywgcmVsWSAvIGgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIG9uTW91c2UoZSwgc3RhcnRpbmcpIHtcbiAgICAgICAgdmFyIGJ1dHRvbiA9IGUuYnV0dG9ucyA9PT0gdW5kZWZpbmVkID8gZS53aGljaCA6IGUuYnV0dG9ucztcbiAgICAgICAgaWYgKGJ1dHRvbiA9PT0gMSkge1xuICAgICAgICAgICAgb25Nb3ZlKGUsIGUsIHN0YXJ0aW5nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGRyYWdnaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblRvdWNoKGUsIHN0YXJ0aW5nKSB7XG4gICAgICAgIGlmIChlLnRvdWNoZXMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvbk1vdmUoZSwgZS50b3VjaGVzWzBdLCBzdGFydGluZyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZXZlbnRCdWNrZXQuYWRkKGFyZWEsICdtb3VzZWRvd24nLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBvbk1vdXNlKGUsIHRydWUpO1xuICAgIH0pO1xuICAgIGV2ZW50QnVja2V0LmFkZChhcmVhLCAndG91Y2hzdGFydCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIG9uVG91Y2goZSwgdHJ1ZSk7XG4gICAgfSk7XG4gICAgZXZlbnRCdWNrZXQuYWRkKHdpbmRvdywgJ21vdXNlbW92ZScsIG9uTW91c2UpO1xuICAgIGV2ZW50QnVja2V0LmFkZChhcmVhLCAndG91Y2htb3ZlJywgb25Ub3VjaCk7XG4gICAgZXZlbnRCdWNrZXQuYWRkKHdpbmRvdywgJ21vdXNldXAnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGV2ZW50QnVja2V0LmFkZChhcmVhLCAndG91Y2hlbmQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgIH0pO1xuICAgIGV2ZW50QnVja2V0LmFkZChhcmVhLCAndG91Y2hjYW5jZWwnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICBkcmFnZ2luZyA9IGZhbHNlO1xuICAgIH0pO1xufVxuXG52YXIgQkdfVFJBTlNQID0gJ2xpbmVhci1ncmFkaWVudCg0NWRlZywgbGlnaHRncmV5IDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA3NSUsIGxpZ2h0Z3JleSA3NSUpIDAgMCAvIDJlbSAyZW0sXFxuICAgICAgICAgICAgICAgICAgIGxpbmVhci1ncmFkaWVudCg0NWRlZywgbGlnaHRncmV5IDI1JSwgICAgICAgd2hpdGUgMjUlLCAgICAgICB3aGl0ZSA3NSUsIGxpZ2h0Z3JleSA3NSUpIDFlbSAxZW0gLyAyZW0gMmVtJztcbnZhciBIVUVTID0gMzYwO1xuXG52YXIgRVZFTlRfS0VZID0gJ2tleWRvd24nLFxuICAgIEVWRU5UX0NMSUNLX09VVFNJREUgPSAnbW91c2Vkb3duJyxcbiAgICBFVkVOVF9UQUJfTU9WRSA9ICdmb2N1c2luJztcblxuZnVuY3Rpb24gJChzZWxlY3RvciwgY29udGV4dCkge1xuICAgIHJldHVybiAoY29udGV4dCB8fCBkb2N1bWVudCkucXVlcnlTZWxlY3RvcihzZWxlY3Rvcik7XG59XG5cbmZ1bmN0aW9uIHN0b3BFdmVudChlKSB7XG5cbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbn1cbmZ1bmN0aW9uIG9uS2V5KGJ1Y2tldCwgdGFyZ2V0LCBrZXlzLCBoYW5kbGVyLCBzdG9wKSB7XG4gICAgYnVja2V0LmFkZCh0YXJnZXQsIEVWRU5UX0tFWSwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgaWYgKGtleXMuaW5kZXhPZihlLmtleSkgPj0gMCkge1xuICAgICAgICAgICAgaWYgKHN0b3ApIHtcbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQoZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBoYW5kbGVyKGUpO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cbnZhciBQaWNrZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gUGlja2VyKG9wdGlvbnMpIHtcbiAgICAgICAgY2xhc3NDYWxsQ2hlY2sodGhpcywgUGlja2VyKTtcblxuXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSB7XG5cbiAgICAgICAgICAgIHBvcHVwOiAncmlnaHQnLFxuICAgICAgICAgICAgbGF5b3V0OiAnZGVmYXVsdCcsXG4gICAgICAgICAgICBhbHBoYTogdHJ1ZSxcbiAgICAgICAgICAgIGVkaXRvcjogdHJ1ZSxcbiAgICAgICAgICAgIGVkaXRvckZvcm1hdDogJ2hleCcsXG4gICAgICAgICAgICBjYW5jZWxCdXR0b246IGZhbHNlLFxuICAgICAgICAgICAgZGVmYXVsdENvbG9yOiAnIzBjZidcbiAgICAgICAgfTtcblxuICAgICAgICB0aGlzLl9ldmVudHMgPSBuZXcgRXZlbnRCdWNrZXQoKTtcblxuICAgICAgICB0aGlzLm9uQ2hhbmdlID0gbnVsbDtcblxuICAgICAgICB0aGlzLm9uRG9uZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5vbk9wZW4gPSBudWxsO1xuXG4gICAgICAgIHRoaXMub25DbG9zZSA9IG51bGw7XG5cbiAgICAgICAgdGhpcy5zZXRPcHRpb25zKG9wdGlvbnMpO1xuICAgIH1cblxuICAgIGNyZWF0ZUNsYXNzKFBpY2tlciwgW3tcbiAgICAgICAga2V5OiAnc2V0T3B0aW9ucycsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRPcHRpb25zKG9wdGlvbnMpIHtcbiAgICAgICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgICAgICAgICAgIGlmICghb3B0aW9ucykge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciBzZXR0aW5ncyA9IHRoaXMuc2V0dGluZ3M7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHRyYW5zZmVyKHNvdXJjZSwgdGFyZ2V0LCBza2lwS2V5cykge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzb3VyY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNraXBLZXlzICYmIHNraXBLZXlzLmluZGV4T2Yoa2V5KSA+PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAob3B0aW9ucyBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgc2V0dGluZ3MucGFyZW50ID0gb3B0aW9ucztcbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MucGFyZW50ICYmIG9wdGlvbnMucGFyZW50ICYmIHNldHRpbmdzLnBhcmVudCAhPT0gb3B0aW9ucy5wYXJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzLnJlbW92ZShzZXR0aW5ncy5wYXJlbnQpO1xuICAgICAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cEluaXRlZCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHRyYW5zZmVyKG9wdGlvbnMsIHNldHRpbmdzKTtcblxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uQ2hhbmdlKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25DaGFuZ2UgPSBvcHRpb25zLm9uQ2hhbmdlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5vbkRvbmUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkRvbmUgPSBvcHRpb25zLm9uRG9uZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnMub25PcGVuKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuID0gb3B0aW9ucy5vbk9wZW47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zLm9uQ2xvc2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vbkNsb3NlID0gb3B0aW9ucy5vbkNsb3NlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjb2wgPSBvcHRpb25zLmNvbG9yIHx8IG9wdGlvbnMuY29sb3VyO1xuICAgICAgICAgICAgICAgIGlmIChjb2wpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2V0Q29sb3IoY29sKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSBzZXR0aW5ncy5wYXJlbnQ7XG4gICAgICAgICAgICBpZiAocGFyZW50ICYmIHNldHRpbmdzLnBvcHVwICYmICF0aGlzLl9wb3B1cEluaXRlZCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIG9wZW5Qcm94eSA9IGZ1bmN0aW9uIG9wZW5Qcm94eShlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpcy5vcGVuSGFuZGxlcihlKTtcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgdGhpcy5fZXZlbnRzLmFkZChwYXJlbnQsICdjbGljaycsIG9wZW5Qcm94eSk7XG5cbiAgICAgICAgICAgICAgICBvbktleSh0aGlzLl9ldmVudHMsIHBhcmVudCwgWycgJywgJ1NwYWNlYmFyJywgJ0VudGVyJ10sIG9wZW5Qcm94eSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9wb3B1cEluaXRlZCA9IHRydWU7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMucGFyZW50ICYmICFzZXR0aW5ncy5wb3B1cCkge1xuICAgICAgICAgICAgICAgIHRoaXMuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdvcGVuSGFuZGxlcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuSGFuZGxlcihlKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5zaG93KCkpIHtcblxuICAgICAgICAgICAgICAgIGUgJiYgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wYXJlbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICdub25lJztcblxuICAgICAgICAgICAgICAgIHZhciB0b0ZvY3VzID0gZSAmJiBlLnR5cGUgPT09IEVWRU5UX0tFWSA/IHRoaXMuX2RvbUVkaXQgOiB0aGlzLmRvbUVsZW1lbnQ7XG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0b0ZvY3VzLmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfSwgMTAwKTtcblxuICAgICAgICAgICAgICAgIGlmICh0aGlzLm9uT3Blbikge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3Blbih0aGlzLmNvbG91cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdjbG9zZUhhbmRsZXInLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2VIYW5kbGVyKGUpIHtcbiAgICAgICAgICAgIHZhciBldmVudCA9IGUgJiYgZS50eXBlO1xuICAgICAgICAgICAgdmFyIGRvSGlkZSA9IGZhbHNlO1xuXG4gICAgICAgICAgICBpZiAoIWUpIHtcbiAgICAgICAgICAgICAgICBkb0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChldmVudCA9PT0gRVZFTlRfQ0xJQ0tfT1VUU0lERSB8fCBldmVudCA9PT0gRVZFTlRfVEFCX01PVkUpIHtcblxuICAgICAgICAgICAgICAgIHZhciBrbm93blRpbWUgPSAodGhpcy5fX2NvbnRhaW5lZEV2ZW50IHx8IDApICsgMTAwO1xuICAgICAgICAgICAgICAgIGlmIChlLnRpbWVTdGFtcCA+IGtub3duVGltZSkge1xuICAgICAgICAgICAgICAgICAgICBkb0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG5cbiAgICAgICAgICAgICAgICBzdG9wRXZlbnQoZSk7XG5cbiAgICAgICAgICAgICAgICBkb0hpZGUgPSB0cnVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoZG9IaWRlICYmIHRoaXMuaGlkZSgpKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wYXJlbnQuc3R5bGUucG9pbnRlckV2ZW50cyA9ICcnO1xuXG4gICAgICAgICAgICAgICAgaWYgKGV2ZW50ICE9PSBFVkVOVF9DTElDS19PVVRTSURFKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MucGFyZW50LmZvY3VzKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMub25DbG9zZSkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLm9uQ2xvc2UodGhpcy5jb2xvdXIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnbW92ZVBvcHVwJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIG1vdmVQb3B1cChvcHRpb25zLCBvcGVuKSB7XG5cbiAgICAgICAgICAgIHRoaXMuY2xvc2VIYW5kbGVyKCk7XG5cbiAgICAgICAgICAgIHRoaXMuc2V0T3B0aW9ucyhvcHRpb25zKTtcbiAgICAgICAgICAgIGlmIChvcGVuKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5vcGVuSGFuZGxlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdzZXRDb2xvcicsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRDb2xvcihjb2xvciwgc2lsZW50KSB7XG4gICAgICAgICAgICB0aGlzLl9zZXRDb2xvcihjb2xvciwgeyBzaWxlbnQ6IHNpbGVudCB9KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3NldENvbG9yJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRDb2xvcihjb2xvciwgZmxhZ3MpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29sb3IgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgY29sb3IgPSBjb2xvci50cmltKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWNvbG9yKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmbGFncyA9IGZsYWdzIHx8IHt9O1xuICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7XG4gICAgICAgICAgICB0cnkge1xuXG4gICAgICAgICAgICAgICAgYyA9IG5ldyBDb2xvcihjb2xvcik7XG4gICAgICAgICAgICB9IGNhdGNoIChleCkge1xuICAgICAgICAgICAgICAgIGlmIChmbGFncy5mYWlsU2lsZW50bHkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB0aHJvdyBleDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFscGhhKSB7XG4gICAgICAgICAgICAgICAgdmFyIGhzbGEgPSBjLmhzbGE7XG4gICAgICAgICAgICAgICAgaHNsYVszXSA9IDE7XG4gICAgICAgICAgICAgICAgYy5oc2xhID0gaHNsYTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuY29sb3VyID0gdGhpcy5jb2xvciA9IGM7XG4gICAgICAgICAgICB0aGlzLl9zZXRIU0xBKG51bGwsIG51bGwsIG51bGwsIG51bGwsIGZsYWdzKTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnc2V0Q29sb3VyJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldENvbG91cihjb2xvdXIsIHNpbGVudCkge1xuICAgICAgICAgICAgdGhpcy5zZXRDb2xvcihjb2xvdXIsIHNpbGVudCk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ3Nob3cnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvdygpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnNldHRpbmdzLnBhcmVudDtcbiAgICAgICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAodGhpcy5kb21FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdmFyIHRvZ2dsZWQgPSB0aGlzLl90b2dnbGVET00odHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICB0aGlzLl9zZXRQb3NpdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRvZ2dsZWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBodG1sID0gdGhpcy5zZXR0aW5ncy50ZW1wbGF0ZSB8fCAnPGRpdiBjbGFzcz1cInBpY2tlcl93cmFwcGVyXCIgdGFiaW5kZXg9XCItMVwiPjxkaXYgY2xhc3M9XCJwaWNrZXJfYXJyb3dcIj48L2Rpdj48ZGl2IGNsYXNzPVwicGlja2VyX2h1ZSBwaWNrZXJfc2xpZGVyXCI+PGRpdiBjbGFzcz1cInBpY2tlcl9zZWxlY3RvclwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJwaWNrZXJfc2xcIj48ZGl2IGNsYXNzPVwicGlja2VyX3NlbGVjdG9yXCI+PC9kaXY+PC9kaXY+PGRpdiBjbGFzcz1cInBpY2tlcl9hbHBoYSBwaWNrZXJfc2xpZGVyXCI+PGRpdiBjbGFzcz1cInBpY2tlcl9zZWxlY3RvclwiPjwvZGl2PjwvZGl2PjxkaXYgY2xhc3M9XCJwaWNrZXJfZWRpdG9yXCI+PGlucHV0IGFyaWEtbGFiZWw9XCJUeXBlIGEgY29sb3IgbmFtZSBvciBoZXggdmFsdWVcIi8+PC9kaXY+PGRpdiBjbGFzcz1cInBpY2tlcl9zYW1wbGVcIj48L2Rpdj48ZGl2IGNsYXNzPVwicGlja2VyX2RvbmVcIj48YnV0dG9uPk9rPC9idXR0b24+PC9kaXY+PGRpdiBjbGFzcz1cInBpY2tlcl9jYW5jZWxcIj48YnV0dG9uPkNhbmNlbDwvYnV0dG9uPjwvZGl2PjwvZGl2Pic7XG4gICAgICAgICAgICB2YXIgd3JhcHBlciA9IHBhcnNlSFRNTChodG1sKTtcblxuICAgICAgICAgICAgdGhpcy5kb21FbGVtZW50ID0gd3JhcHBlcjtcbiAgICAgICAgICAgIHRoaXMuX2RvbUggPSAkKCcucGlja2VyX2h1ZScsIHdyYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5fZG9tU0wgPSAkKCcucGlja2VyX3NsJywgd3JhcHBlcik7XG4gICAgICAgICAgICB0aGlzLl9kb21BID0gJCgnLnBpY2tlcl9hbHBoYScsIHdyYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5fZG9tRWRpdCA9ICQoJy5waWNrZXJfZWRpdG9yIGlucHV0Jywgd3JhcHBlcik7XG4gICAgICAgICAgICB0aGlzLl9kb21TYW1wbGUgPSAkKCcucGlja2VyX3NhbXBsZScsIHdyYXBwZXIpO1xuICAgICAgICAgICAgdGhpcy5fZG9tT2theSA9ICQoJy5waWNrZXJfZG9uZSBidXR0b24nLCB3cmFwcGVyKTtcbiAgICAgICAgICAgIHRoaXMuX2RvbUNhbmNlbCA9ICQoJy5waWNrZXJfY2FuY2VsIGJ1dHRvbicsIHdyYXBwZXIpO1xuXG4gICAgICAgICAgICB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2xheW91dF8nICsgdGhpcy5zZXR0aW5ncy5sYXlvdXQpO1xuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFscGhhKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdub19hbHBoYScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmVkaXRvcikge1xuICAgICAgICAgICAgICAgIHdyYXBwZXIuY2xhc3NMaXN0LmFkZCgnbm9fZWRpdG9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIXRoaXMuc2V0dGluZ3MuY2FuY2VsQnV0dG9uKSB7XG4gICAgICAgICAgICAgICAgd3JhcHBlci5jbGFzc0xpc3QuYWRkKCdub19jYW5jZWwnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX2lmUG9wdXAoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiB3cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3BvcHVwJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdGhpcy5fc2V0UG9zaXRpb24oKTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuY29sb3VyKSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVUkoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgdGhpcy5fc2V0Q29sb3IodGhpcy5zZXR0aW5ncy5kZWZhdWx0Q29sb3IpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5fYmluZEV2ZW50cygpO1xuXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnaGlkZScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBoaWRlKCkge1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3RvZ2dsZURPTShmYWxzZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ2Rlc3Ryb3knLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgICAgIHRoaXMuX2V2ZW50cy5kZXN0cm95KCk7XG4gICAgICAgICAgICBpZiAodGhpcy5kb21FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncy5wYXJlbnQucmVtb3ZlQ2hpbGQodGhpcy5kb21FbGVtZW50KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX2JpbmRFdmVudHMnLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX2JpbmRFdmVudHMoKSB7XG4gICAgICAgICAgICB2YXIgX3RoaXMyID0gdGhpcztcblxuICAgICAgICAgICAgdmFyIHRoYXQgPSB0aGlzLFxuICAgICAgICAgICAgICAgIGRvbSA9IHRoaXMuZG9tRWxlbWVudCxcbiAgICAgICAgICAgICAgICBldmVudHMgPSB0aGlzLl9ldmVudHM7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGFkZEV2ZW50KHRhcmdldCwgdHlwZSwgaGFuZGxlcikge1xuICAgICAgICAgICAgICAgIGV2ZW50cy5hZGQodGFyZ2V0LCB0eXBlLCBoYW5kbGVyKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgYWRkRXZlbnQoZG9tLCAnY2xpY2snLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgZHJhZ1RyYWNrKGV2ZW50cywgdGhpcy5fZG9tSCwgZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc2V0SFNMQSh4KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBkcmFnVHJhY2soZXZlbnRzLCB0aGlzLl9kb21TTCwgZnVuY3Rpb24gKHgsIHkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc2V0SFNMQShudWxsLCB4LCAxIC0geSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuYWxwaGEpIHtcbiAgICAgICAgICAgICAgICBkcmFnVHJhY2soZXZlbnRzLCB0aGlzLl9kb21BLCBmdW5jdGlvbiAoeCwgeSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdGhhdC5fc2V0SFNMQShudWxsLCBudWxsLCBudWxsLCAxIC0geSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlZGl0SW5wdXQgPSB0aGlzLl9kb21FZGl0O1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGFkZEV2ZW50KGVkaXRJbnB1dCwgJ2lucHV0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhhdC5fc2V0Q29sb3IodGhpcy52YWx1ZSwgeyBmcm9tRWRpdG9yOiB0cnVlLCBmYWlsU2lsZW50bHk6IHRydWUgfSk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBhZGRFdmVudChlZGl0SW5wdXQsICdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpbnB1dCA9IHRoaXM7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlucHV0LnNlbGVjdGlvblN0YXJ0ID09PSBpbnB1dC5zZWxlY3Rpb25FbmQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlucHV0LnNlbGVjdCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lmUG9wdXAoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyIHBvcHVwQ2xvc2VQcm94eSA9IGZ1bmN0aW9uIHBvcHVwQ2xvc2VQcm94eShlKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2xvc2VIYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBhZGRFdmVudCh3aW5kb3csIEVWRU5UX0NMSUNLX09VVFNJREUsIHBvcHVwQ2xvc2VQcm94eSk7XG4gICAgICAgICAgICAgICAgYWRkRXZlbnQod2luZG93LCBFVkVOVF9UQUJfTU9WRSwgcG9wdXBDbG9zZVByb3h5KTtcbiAgICAgICAgICAgICAgICBvbktleShldmVudHMsIGRvbSwgWydFc2MnLCAnRXNjYXBlJ10sIHBvcHVwQ2xvc2VQcm94eSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgdGltZUtlZXBlciA9IGZ1bmN0aW9uIHRpbWVLZWVwZXIoZSkge1xuICAgICAgICAgICAgICAgICAgICBfdGhpczIuX19jb250YWluZWRFdmVudCA9IGUudGltZVN0YW1wO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgYWRkRXZlbnQoZG9tLCBFVkVOVF9DTElDS19PVVRTSURFLCB0aW1lS2VlcGVyKTtcblxuICAgICAgICAgICAgICAgIGFkZEV2ZW50KGRvbSwgRVZFTlRfVEFCX01PVkUsIHRpbWVLZWVwZXIpO1xuXG4gICAgICAgICAgICAgICAgYWRkRXZlbnQoX3RoaXMyLl9kb21DYW5jZWwsICdjbGljaycsIHBvcHVwQ2xvc2VQcm94eSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIG9uRG9uZVByb3h5ID0gZnVuY3Rpb24gb25Eb25lUHJveHkoZSkge1xuICAgICAgICAgICAgICAgIF90aGlzMi5faWZQb3B1cChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczIuY2xvc2VIYW5kbGVyKGUpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGlmIChfdGhpczIub25Eb25lKSB7XG4gICAgICAgICAgICAgICAgICAgIF90aGlzMi5vbkRvbmUoX3RoaXMyLmNvbG91cik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGFkZEV2ZW50KHRoaXMuX2RvbU9rYXksICdjbGljaycsIG9uRG9uZVByb3h5KTtcbiAgICAgICAgICAgIG9uS2V5KGV2ZW50cywgZG9tLCBbJ0VudGVyJ10sIG9uRG9uZVByb3h5KTtcbiAgICAgICAgfVxuICAgIH0sIHtcbiAgICAgICAga2V5OiAnX3NldFBvc2l0aW9uJyxcbiAgICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRQb3NpdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBwYXJlbnQgPSB0aGlzLnNldHRpbmdzLnBhcmVudCxcbiAgICAgICAgICAgICAgICBlbG0gPSB0aGlzLmRvbUVsZW1lbnQ7XG5cbiAgICAgICAgICAgIGlmIChwYXJlbnQgIT09IGVsbS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgICAgICAgcGFyZW50LmFwcGVuZENoaWxkKGVsbSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRoaXMuX2lmUG9wdXAoZnVuY3Rpb24gKHBvcHVwKSB7XG5cbiAgICAgICAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZShwYXJlbnQpLnBvc2l0aW9uID09PSAnc3RhdGljJykge1xuICAgICAgICAgICAgICAgICAgICBwYXJlbnQuc3R5bGUucG9zaXRpb24gPSAncmVsYXRpdmUnO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBjc3NDbGFzcyA9IHBvcHVwID09PSB0cnVlID8gJ3BvcHVwX3JpZ2h0JyA6ICdwb3B1cF8nICsgcG9wdXA7XG5cbiAgICAgICAgICAgICAgICBbJ3BvcHVwX3RvcCcsICdwb3B1cF9ib3R0b20nLCAncG9wdXBfbGVmdCcsICdwb3B1cF9yaWdodCddLmZvckVhY2goZnVuY3Rpb24gKGMpIHtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoYyA9PT0gY3NzQ2xhc3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKGMpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZWxtLmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKGNzc0NsYXNzKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfc2V0SFNMQScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0SFNMQShoLCBzLCBsLCBhLCBmbGFncykge1xuICAgICAgICAgICAgZmxhZ3MgPSBmbGFncyB8fCB7fTtcblxuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuY29sb3VyLFxuICAgICAgICAgICAgICAgIGhzbGEgPSBjb2wuaHNsYTtcblxuICAgICAgICAgICAgW2gsIHMsIGwsIGFdLmZvckVhY2goZnVuY3Rpb24gKHgsIGkpIHtcbiAgICAgICAgICAgICAgICBpZiAoeCB8fCB4ID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGhzbGFbaV0gPSB4O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29sLmhzbGEgPSBoc2xhO1xuXG4gICAgICAgICAgICB0aGlzLl91cGRhdGVVSShmbGFncyk7XG5cbiAgICAgICAgICAgIGlmICh0aGlzLm9uQ2hhbmdlICYmICFmbGFncy5zaWxlbnQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ2hhbmdlKGNvbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ191cGRhdGVVSScsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlVUkoZmxhZ3MpIHtcbiAgICAgICAgICAgIGlmICghdGhpcy5kb21FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZmxhZ3MgPSBmbGFncyB8fCB7fTtcblxuICAgICAgICAgICAgdmFyIGNvbCA9IHRoaXMuY29sb3VyLFxuICAgICAgICAgICAgICAgIGhzbCA9IGNvbC5oc2xhLFxuICAgICAgICAgICAgICAgIGNzc0h1ZSA9ICdoc2woJyArIGhzbFswXSAqIEhVRVMgKyAnLCAxMDAlLCA1MCUpJyxcbiAgICAgICAgICAgICAgICBjc3NIU0wgPSBjb2wuaHNsU3RyaW5nLFxuICAgICAgICAgICAgICAgIGNzc0hTTEEgPSBjb2wuaHNsYVN0cmluZztcblxuICAgICAgICAgICAgdmFyIHVpSCA9IHRoaXMuX2RvbUgsXG4gICAgICAgICAgICAgICAgdWlTTCA9IHRoaXMuX2RvbVNMLFxuICAgICAgICAgICAgICAgIHVpQSA9IHRoaXMuX2RvbUEsXG4gICAgICAgICAgICAgICAgdGh1bWJIID0gJCgnLnBpY2tlcl9zZWxlY3RvcicsIHVpSCksXG4gICAgICAgICAgICAgICAgdGh1bWJTTCA9ICQoJy5waWNrZXJfc2VsZWN0b3InLCB1aVNMKSxcbiAgICAgICAgICAgICAgICB0aHVtYkEgPSAkKCcucGlja2VyX3NlbGVjdG9yJywgdWlBKTtcblxuICAgICAgICAgICAgZnVuY3Rpb24gcG9zWChwYXJlbnQsIGNoaWxkLCByZWxYKSB7XG4gICAgICAgICAgICAgICAgY2hpbGQuc3R5bGUubGVmdCA9IHJlbFggKiAxMDAgKyAnJSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBmdW5jdGlvbiBwb3NZKHBhcmVudCwgY2hpbGQsIHJlbFkpIHtcbiAgICAgICAgICAgICAgICBjaGlsZC5zdHlsZS50b3AgPSByZWxZICogMTAwICsgJyUnO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwb3NYKHVpSCwgdGh1bWJILCBoc2xbMF0pO1xuXG4gICAgICAgICAgICB0aGlzLl9kb21TTC5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSB0aGlzLl9kb21ILnN0eWxlLmNvbG9yID0gY3NzSHVlO1xuXG4gICAgICAgICAgICBwb3NYKHVpU0wsIHRodW1iU0wsIGhzbFsxXSk7XG4gICAgICAgICAgICBwb3NZKHVpU0wsIHRodW1iU0wsIDEgLSBoc2xbMl0pO1xuXG4gICAgICAgICAgICB1aVNMLnN0eWxlLmNvbG9yID0gY3NzSFNMO1xuXG4gICAgICAgICAgICBwb3NZKHVpQSwgdGh1bWJBLCAxIC0gaHNsWzNdKTtcblxuICAgICAgICAgICAgdmFyIG9wYXF1ZSA9IGNzc0hTTCxcbiAgICAgICAgICAgICAgICB0cmFuc3AgPSBvcGFxdWUucmVwbGFjZSgnaHNsJywgJ2hzbGEnKS5yZXBsYWNlKCcpJywgJywgMCknKSxcbiAgICAgICAgICAgICAgICBiZyA9ICdsaW5lYXItZ3JhZGllbnQoJyArIFtvcGFxdWUsIHRyYW5zcF0gKyAnKSc7XG5cbiAgICAgICAgICAgIHRoaXMuX2RvbUEuc3R5bGUuYmFja2dyb3VuZCA9IGJnICsgJywgJyArIEJHX1RSQU5TUDtcblxuICAgICAgICAgICAgaWYgKCFmbGFncy5mcm9tRWRpdG9yKSB7XG4gICAgICAgICAgICAgICAgdmFyIGZvcm1hdCA9IHRoaXMuc2V0dGluZ3MuZWRpdG9yRm9ybWF0LFxuICAgICAgICAgICAgICAgICAgICBhbHBoYSA9IHRoaXMuc2V0dGluZ3MuYWxwaGE7XG5cbiAgICAgICAgICAgICAgICB2YXIgdmFsdWUgPSB2b2lkIDA7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChmb3JtYXQpIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmdiJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sLnByaW50UkdCKGFscGhhKTticmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnaHNsJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sLnByaW50SFNMKGFscGhhKTticmVhaztcbiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gY29sLnByaW50SGV4KGFscGhhKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgdGhpcy5fZG9tRWRpdC52YWx1ZSA9IHZhbHVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB0aGlzLl9kb21TYW1wbGUuc3R5bGUuY29sb3IgPSBjc3NIU0xBO1xuICAgICAgICB9XG4gICAgfSwge1xuICAgICAgICBrZXk6ICdfaWZQb3B1cCcsXG4gICAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaWZQb3B1cChhY3Rpb25JZiwgYWN0aW9uRWxzZSkge1xuICAgICAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MucGFyZW50ICYmIHRoaXMuc2V0dGluZ3MucG9wdXApIHtcbiAgICAgICAgICAgICAgICBhY3Rpb25JZiAmJiBhY3Rpb25JZih0aGlzLnNldHRpbmdzLnBvcHVwKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgYWN0aW9uRWxzZSAmJiBhY3Rpb25FbHNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGtleTogJ190b2dnbGVET00nLFxuICAgICAgICB2YWx1ZTogZnVuY3Rpb24gX3RvZ2dsZURPTSh0b1Zpc2libGUpIHtcbiAgICAgICAgICAgIHZhciBkb20gPSB0aGlzLmRvbUVsZW1lbnQ7XG4gICAgICAgICAgICBpZiAoIWRvbSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIGRpc3BsYXlTdHlsZSA9IHRvVmlzaWJsZSA/ICcnIDogJ25vbmUnLFxuICAgICAgICAgICAgICAgIHRvZ2dsZSA9IGRvbS5zdHlsZS5kaXNwbGF5ICE9PSBkaXNwbGF5U3R5bGU7XG5cbiAgICAgICAgICAgIGlmICh0b2dnbGUpIHtcbiAgICAgICAgICAgICAgICBkb20uc3R5bGUuZGlzcGxheSA9IGRpc3BsYXlTdHlsZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiB0b2dnbGU7XG4gICAgICAgIH1cbiAgICB9XSk7XG4gICAgcmV0dXJuIFBpY2tlcjtcbn0oKTtcblxue1xuICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7XG4gICAgc3R5bGUudGV4dENvbnRlbnQgPSAnLnBpY2tlcl93cmFwcGVyLm5vX2FscGhhIC5waWNrZXJfYWxwaGF7ZGlzcGxheTpub25lfS5waWNrZXJfd3JhcHBlci5ub19lZGl0b3IgLnBpY2tlcl9lZGl0b3J7cG9zaXRpb246YWJzb2x1dGU7ei1pbmRleDotMTtvcGFjaXR5OjB9LnBpY2tlcl93cmFwcGVyLm5vX2NhbmNlbCAucGlja2VyX2NhbmNlbHtkaXNwbGF5Om5vbmV9LmxheW91dF9kZWZhdWx0LnBpY2tlcl93cmFwcGVye2Rpc3BsYXk6ZmxleDtmbGV4LWZsb3c6cm93IHdyYXA7anVzdGlmeS1jb250ZW50OnNwYWNlLWJldHdlZW47YWxpZ24taXRlbXM6c3RyZXRjaDtmb250LXNpemU6MTBweDt3aWR0aDoyNWVtO3BhZGRpbmc6LjVlbX0ubGF5b3V0X2RlZmF1bHQucGlja2VyX3dyYXBwZXIgaW5wdXQsLmxheW91dF9kZWZhdWx0LnBpY2tlcl93cmFwcGVyIGJ1dHRvbntmb250LXNpemU6MXJlbX0ubGF5b3V0X2RlZmF1bHQucGlja2VyX3dyYXBwZXI+KnttYXJnaW46LjVlbX0ubGF5b3V0X2RlZmF1bHQucGlja2VyX3dyYXBwZXI6OmJlZm9yZXtjb250ZW50OlwiXCI7ZGlzcGxheTpibG9jazt3aWR0aDoxMDAlO2hlaWdodDowO29yZGVyOjF9LmxheW91dF9kZWZhdWx0IC5waWNrZXJfc2xpZGVyLC5sYXlvdXRfZGVmYXVsdCAucGlja2VyX3NlbGVjdG9ye3BhZGRpbmc6MWVtfS5sYXlvdXRfZGVmYXVsdCAucGlja2VyX2h1ZXt3aWR0aDoxMDAlfS5sYXlvdXRfZGVmYXVsdCAucGlja2VyX3Nse2ZsZXg6MSAxIGF1dG99LmxheW91dF9kZWZhdWx0IC5waWNrZXJfc2w6OmJlZm9yZXtjb250ZW50OlwiXCI7ZGlzcGxheTpibG9jaztwYWRkaW5nLWJvdHRvbToxMDAlfS5sYXlvdXRfZGVmYXVsdCAucGlja2VyX2VkaXRvcntvcmRlcjoxO3dpZHRoOjYuNXJlbX0ubGF5b3V0X2RlZmF1bHQgLnBpY2tlcl9lZGl0b3IgaW5wdXR7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJX0ubGF5b3V0X2RlZmF1bHQgLnBpY2tlcl9zYW1wbGV7b3JkZXI6MTtmbGV4OjEgMSBhdXRvfS5sYXlvdXRfZGVmYXVsdCAucGlja2VyX2RvbmUsLmxheW91dF9kZWZhdWx0IC5waWNrZXJfY2FuY2Vse29yZGVyOjF9LnBpY2tlcl93cmFwcGVye2JveC1zaXppbmc6Ym9yZGVyLWJveDtiYWNrZ3JvdW5kOiNmMmYyZjI7Ym94LXNoYWRvdzowIDAgMCAxcHggc2lsdmVyO2N1cnNvcjpkZWZhdWx0O2ZvbnQtZmFtaWx5OnNhbnMtc2VyaWY7Y29sb3I6IzQ0NDtwb2ludGVyLWV2ZW50czphdXRvfS5waWNrZXJfd3JhcHBlcjpmb2N1c3tvdXRsaW5lOm5vbmV9LnBpY2tlcl93cmFwcGVyIGJ1dHRvbiwucGlja2VyX3dyYXBwZXIgaW5wdXR7Ym94LXNpemluZzpib3JkZXItYm94O2JvcmRlcjpub25lO2JveC1zaGFkb3c6MCAwIDAgMXB4IHNpbHZlcjtvdXRsaW5lOm5vbmV9LnBpY2tlcl93cmFwcGVyIGJ1dHRvbjpmb2N1cywucGlja2VyX3dyYXBwZXIgYnV0dG9uOmFjdGl2ZSwucGlja2VyX3dyYXBwZXIgaW5wdXQ6Zm9jdXMsLnBpY2tlcl93cmFwcGVyIGlucHV0OmFjdGl2ZXtib3gtc2hhZG93OjAgMCAycHggMXB4ICMxZTkwZmZ9LnBpY2tlcl93cmFwcGVyIGJ1dHRvbntwYWRkaW5nOi40ZW0gLjZlbTtjdXJzb3I6cG9pbnRlcjtiYWNrZ3JvdW5kLWNvbG9yOiNmNWY1ZjU7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQoMGRlZywgZ2FpbnNib3JvLCB0cmFuc3BhcmVudCl9LnBpY2tlcl93cmFwcGVyIGJ1dHRvbjphY3RpdmV7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQoMGRlZywgdHJhbnNwYXJlbnQsIGdhaW5zYm9ybyl9LnBpY2tlcl93cmFwcGVyIGJ1dHRvbjpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNmZmZ9LnBpY2tlcl9zZWxlY3Rvcntwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjE7ZGlzcGxheTpibG9jazstd2Via2l0LXRyYW5zZm9ybTp0cmFuc2xhdGUoLTUwJSwgLTUwJSk7dHJhbnNmb3JtOnRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtib3JkZXI6MnB4IHNvbGlkICNmZmY7Ym9yZGVyLXJhZGl1czoxMDAlO2JveC1zaGFkb3c6MCAwIDNweCAxcHggIzY3YjlmZjtiYWNrZ3JvdW5kOmN1cnJlbnRDb2xvcjtjdXJzb3I6cG9pbnRlcn0ucGlja2VyX3NsaWRlciAucGlja2VyX3NlbGVjdG9ye2JvcmRlci1yYWRpdXM6MnB4fS5waWNrZXJfaHVle3Bvc2l0aW9uOnJlbGF0aXZlO2JhY2tncm91bmQtaW1hZ2U6bGluZWFyLWdyYWRpZW50KDkwZGVnLCByZWQsIHllbGxvdywgbGltZSwgY3lhbiwgYmx1ZSwgbWFnZW50YSwgcmVkKTtib3gtc2hhZG93OjAgMCAwIDFweCBzaWx2ZXJ9LnBpY2tlcl9zbHtwb3NpdGlvbjpyZWxhdGl2ZTtib3gtc2hhZG93OjAgMCAwIDFweCBzaWx2ZXI7YmFja2dyb3VuZC1pbWFnZTpsaW5lYXItZ3JhZGllbnQoMTgwZGVnLCB3aGl0ZSwgcmdiYSgyNTUsIDI1NSwgMjU1LCAwKSA1MCUpLGxpbmVhci1ncmFkaWVudCgwZGVnLCBibGFjaywgcmdiYSgwLCAwLCAwLCAwKSA1MCUpLGxpbmVhci1ncmFkaWVudCg5MGRlZywgIzgwODA4MCwgcmdiYSgxMjgsIDEyOCwgMTI4LCAwKSl9LnBpY2tlcl9hbHBoYSwucGlja2VyX3NhbXBsZXtwb3NpdGlvbjpyZWxhdGl2ZTtiYWNrZ3JvdW5kOmxpbmVhci1ncmFkaWVudCg0NWRlZywgbGlnaHRncmV5IDI1JSwgdHJhbnNwYXJlbnQgMjUlLCB0cmFuc3BhcmVudCA3NSUsIGxpZ2h0Z3JleSA3NSUpIDAgMC8yZW0gMmVtLGxpbmVhci1ncmFkaWVudCg0NWRlZywgbGlnaHRncmV5IDI1JSwgd2hpdGUgMjUlLCB3aGl0ZSA3NSUsIGxpZ2h0Z3JleSA3NSUpIDFlbSAxZW0vMmVtIDJlbTtib3gtc2hhZG93OjAgMCAwIDFweCBzaWx2ZXJ9LnBpY2tlcl9hbHBoYSAucGlja2VyX3NlbGVjdG9yLC5waWNrZXJfc2FtcGxlIC5waWNrZXJfc2VsZWN0b3J7YmFja2dyb3VuZDpub25lfS5waWNrZXJfZWRpdG9yIGlucHV0e2ZvbnQtZmFtaWx5Om1vbm9zcGFjZTtwYWRkaW5nOi4yZW0gLjRlbX0ucGlja2VyX3NhbXBsZTo6YmVmb3Jle2NvbnRlbnQ6XCJcIjtwb3NpdGlvbjphYnNvbHV0ZTtkaXNwbGF5OmJsb2NrO3dpZHRoOjEwMCU7aGVpZ2h0OjEwMCU7YmFja2dyb3VuZDpjdXJyZW50Q29sb3J9LnBpY2tlcl9hcnJvd3twb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4Oi0xfS5waWNrZXJfd3JhcHBlci5wb3B1cHtwb3NpdGlvbjphYnNvbHV0ZTt6LWluZGV4OjI7bWFyZ2luOjEuNWVtfS5waWNrZXJfd3JhcHBlci5wb3B1cCwucGlja2VyX3dyYXBwZXIucG9wdXAgLnBpY2tlcl9hcnJvdzo6YmVmb3JlLC5waWNrZXJfd3JhcHBlci5wb3B1cCAucGlja2VyX2Fycm93OjphZnRlcntiYWNrZ3JvdW5kOiNmMmYyZjI7Ym94LXNoYWRvdzowIDAgMTBweCAxcHggcmdiYSgwLDAsMCwuNCl9LnBpY2tlcl93cmFwcGVyLnBvcHVwIC5waWNrZXJfYXJyb3d7d2lkdGg6M2VtO2hlaWdodDozZW07bWFyZ2luOjB9LnBpY2tlcl93cmFwcGVyLnBvcHVwIC5waWNrZXJfYXJyb3c6OmJlZm9yZSwucGlja2VyX3dyYXBwZXIucG9wdXAgLnBpY2tlcl9hcnJvdzo6YWZ0ZXJ7Y29udGVudDpcIlwiO2Rpc3BsYXk6YmxvY2s7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7bGVmdDowO3otaW5kZXg6LTk5fS5waWNrZXJfd3JhcHBlci5wb3B1cCAucGlja2VyX2Fycm93OjpiZWZvcmV7d2lkdGg6MTAwJTtoZWlnaHQ6MTAwJTstd2Via2l0LXRyYW5zZm9ybTpza2V3KDQ1ZGVnKTt0cmFuc2Zvcm06c2tldyg0NWRlZyk7LXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOjAgMTAwJTt0cmFuc2Zvcm0tb3JpZ2luOjAgMTAwJX0ucGlja2VyX3dyYXBwZXIucG9wdXAgLnBpY2tlcl9hcnJvdzo6YWZ0ZXJ7d2lkdGg6MTUwJTtoZWlnaHQ6MTUwJTtib3gtc2hhZG93Om5vbmV9LnBvcHVwLnBvcHVwX3RvcHtib3R0b206MTAwJTtsZWZ0OjB9LnBvcHVwLnBvcHVwX3RvcCAucGlja2VyX2Fycm93e2JvdHRvbTowO2xlZnQ6MDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoLTkwZGVnKTt0cmFuc2Zvcm06cm90YXRlKC05MGRlZyl9LnBvcHVwLnBvcHVwX2JvdHRvbXt0b3A6MTAwJTtsZWZ0OjB9LnBvcHVwLnBvcHVwX2JvdHRvbSAucGlja2VyX2Fycm93e3RvcDowO2xlZnQ6MDstd2Via2l0LXRyYW5zZm9ybTpyb3RhdGUoOTBkZWcpIHNjYWxlKDEsIC0xKTt0cmFuc2Zvcm06cm90YXRlKDkwZGVnKSBzY2FsZSgxLCAtMSl9LnBvcHVwLnBvcHVwX2xlZnR7dG9wOjA7cmlnaHQ6MTAwJX0ucG9wdXAucG9wdXBfbGVmdCAucGlja2VyX2Fycm93e3RvcDowO3JpZ2h0OjA7LXdlYmtpdC10cmFuc2Zvcm06c2NhbGUoLTEsIDEpO3RyYW5zZm9ybTpzY2FsZSgtMSwgMSl9LnBvcHVwLnBvcHVwX3JpZ2h0e3RvcDowO2xlZnQ6MTAwJX0ucG9wdXAucG9wdXBfcmlnaHQgLnBpY2tlcl9hcnJvd3t0b3A6MDtsZWZ0OjB9JztcbiAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGQuYXBwZW5kQ2hpbGQoc3R5bGUpO1xuXG4gICAgUGlja2VyLlN0eWxlRWxlbWVudCA9IHN0eWxlO1xufVxuXG5leHBvcnQgeyBQaWNrZXIgYXMgZGVmYXVsdCB9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./node_modules/vanilla-picker/dist/vanilla-picker.mjs\n"));

/***/ })

}]);